Usando la configuración de inicio de d:\Programación\MEDICSYS\MEDICSYS.Api\Properties\launchSettings.json...
Compilando...
[21:45:32 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[21:45:32 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
[21:45:33 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
[21:45:33 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[21:45:33 INF] Microsoft.EntityFrameworkCore.Migrations: No migrations were applied. The database is already up to date.
[21:45:33 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[21:45:33 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
[21:45:33 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
[21:45:33 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[21:45:33 INF] Microsoft.EntityFrameworkCore.Migrations: No migrations were applied. The database is already up to date.
[21:45:33 WRN] Microsoft.EntityFrameworkCore.Model.Validation: The foreign key property 'InvoiceItem.InvoiceId1' was created in shadow state because a conflicting property with the simple name 'InvoiceId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
[21:45:33 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[21:45:33 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
[21:45:33 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
[21:45:33 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[21:45:33 INF] Microsoft.EntityFrameworkCore.Migrations: No migrations were applied. The database is already up to date.
[21:45:34 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (8ms) [Parameters=[@__normalizedName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."ConcurrencyStamp", a."Name", a."NormalizedName"
FROM "AspNetRoles" AS a
WHERE a."NormalizedName" = @__normalizedName_0
LIMIT 1
[21:45:34 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."ConcurrencyStamp", a."Name", a."NormalizedName"
FROM "AspNetRoles" AS a
WHERE a."NormalizedName" = @__normalizedName_0
LIMIT 1
[21:45:34 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."ConcurrencyStamp", a."Name", a."NormalizedName"
FROM "AspNetRoles" AS a
WHERE a."NormalizedName" = @__normalizedName_0
LIMIT 1
[21:45:34 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
[21:45:34 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
[21:45:34 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AccountingCategories" AS a)
[21:45:34 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
[21:45:34 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
[21:45:34 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
[21:45:34 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
[21:45:34 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AcademicAppointments" AS a)
[21:45:34 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
[21:45:34 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "OdontologoPatients" AS o)
[21:45:34 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "AspNetUsers" AS a
[21:45:34 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "AspNetUsers" AS a
[21:45:34 INF] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager: User profile is available. Using 'C:\Users\gerso\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[21:45:34 INF] Microsoft.Hosting.Lifetime: Now listening on: http://localhost:5154
[21:45:34 INF] Microsoft.Hosting.Lifetime: Application started. Press Ctrl+C to shut down.
[21:45:34 INF] Microsoft.Hosting.Lifetime: Hosting environment: Development
[21:45:34 INF] Microsoft.Hosting.Lifetime: Content root path: d:\Programación\MEDICSYS\MEDICSYS.Api
[21:45:34 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (5ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT r."Id", r."AppointmentId", r."Channel", r."CreatedAt", r."Message", r."ScheduledAt", r."SentAt", r."Status", r."Target"
FROM "Reminders" AS r
WHERE r."Status" = 'Pending' AND r."ScheduledAt" <= @__now_0
[21:46:34 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT r."Id", r."AppointmentId", r."Channel", r."CreatedAt", r."Message", r."ScheduledAt", r."SentAt", r."Status", r."Target"
FROM "Reminders" AS r
WHERE r."Status" = 'Pending' AND r."ScheduledAt" <= @__now_0
[21:47:32 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/auth/login - null null
[21:47:32 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:32 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/auth/login responded 204 in 6.1857 ms
[21:47:32 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/auth/login - 204 null null 45.1114ms
[21:47:32 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 POST http://localhost:5154/api/auth/login - application/json 63
[21:47:32 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:33 INF] Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler: Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '4/2/2026 0:26:52', Current time (UTC): '4/2/2026 2:47:33'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
[21:47:33 INF] Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler: Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '4/2/2026 0:26:52', Current time (UTC): '4/2/2026 2:47:33'.
[21:47:33 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AuthController.Login (MEDICSYS.Api)'
[21:47:33 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MEDICSYS.Api.Contracts.AuthResponse]] Login(MEDICSYS.Api.Contracts.AuthLoginRequest) on controller MEDICSYS.Api.Controllers.AuthController (MEDICSYS.Api).
[21:47:33 INF] MEDICSYS.Api.Controllers.AuthController: Intento de login para odontologo@medicsys.com
[21:47:33 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
[21:47:33 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:47:33 INF] MEDICSYS.Api.Controllers.AuthController: Usuario 855409da-22ad-4a15-9c3e-7970c0cb9c4e inició sesión como Odontologo
[21:47:33 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'MEDICSYS.Api.Contracts.AuthResponse'.
[21:47:33 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AuthController.Login (MEDICSYS.Api) in 297.2599ms
[21:47:33 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AuthController.Login (MEDICSYS.Api)'
[21:47:33 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP POST /api/auth/login responded 200 in 413.1752 ms
[21:47:33 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 POST http://localhost:5154/api/auth/login - 200 null application/json; charset=utf-8 421.5786ms
[21:47:33 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:47:33 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/patients - null null
[21:47:33 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:33 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/odontologia/inventory/alerts?resolved=false - null null
[21:47:33 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:33 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/agenda/appointments responded 204 in 2.2517 ms
[21:47:33 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/accounting/summary?from=2026-02-01&to=2026-02-28 - null null
[21:47:33 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:33 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/patients responded 204 in 2.4295 ms
[21:47:33 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 204 null null 5.9468ms
[21:47:33 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:33 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/odontologia/inventory/alerts responded 204 in 3.4342 ms
[21:47:33 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/patients - 204 null null 6.8003ms
[21:47:33 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:47:33 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/accounting/summary responded 204 in 4.0222 ms
[21:47:33 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/odontologia/inventory/alerts?resolved=false - 204 null null 9.8842ms
[21:47:33 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/patients - null null
[21:47:33 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:33 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/accounting/summary?from=2026-02-01&to=2026-02-28 - 204 null null 9.8382ms
[21:47:33 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/odontologia/inventory/alerts?resolved=false - null null
[21:47:33 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:33 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/accounting/summary?from=2026-02-01&to=2026-02-28 - null null
[21:47:33 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:33 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:33 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AccountingController.GetSummary (MEDICSYS.Api)'
[21:47:33 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.Odontologia.InventoryController.GetAlerts (MEDICSYS.Api)'
[21:47:33 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.PatientsController.GetAll (MEDICSYS.Api)'
[21:47:33 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api)'
[21:47:33 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Models.Patient]]] GetAll() on controller MEDICSYS.Api.Controllers.PatientsController (MEDICSYS.Api).
[21:47:33 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAlerts", controller = "Inventory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.InventoryAlertDto]]] GetAlerts(System.Nullable`1[System.Boolean]) on controller MEDICSYS.Api.Controllers.Odontologia.InventoryController (MEDICSYS.Api).
[21:47:33 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetSummary", controller = "Accounting"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MEDICSYS.Api.Contracts.AccountingSummaryDto]] GetSummary(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller MEDICSYS.Api.Controllers.AccountingController (MEDICSYS.Api).
[21:47:33 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAppointments", controller = "Agenda"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.AppointmentDto]]] GetAppointments(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid]) on controller MEDICSYS.Api.Controllers.AgendaController (MEDICSYS.Api).
[21:47:33 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT p."Id", p."Address", p."Allergies", p."BloodType", p."CreatedAt", p."DateOfBirth", p."Diseases", p."Email", p."EmergencyContact", p."EmergencyPhone", p."FirstName", p."Gender", p."IdNumber", p."LastName", p."Medications", p."Notes", p."OdontologoId", p."Phone", p."UpdatedAt"
FROM "Patients" AS p
WHERE p."OdontologoId" = @__userId_0
ORDER BY p."LastName", p."FirstName"
[21:47:33 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MEDICSYS.Api.Models.Patient, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:47:33 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (3ms) [Parameters=[@__rangeStart_0='?' (DbType = DateTime), @__rangeEnd_1='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."Amount", a."CategoryId", a."CreatedAt", a."Date", a."Description", a."InvoiceId", a."PaymentMethod", a."Reference", a."Source", a."Type", a0."Id", a0."Group", a0."IsActive", a0."MonthlyBudget", a0."Name", a0."Type"
FROM "AccountingEntries" AS a
INNER JOIN "AccountingCategories" AS a0 ON a."CategoryId" = a0."Id"
WHERE a."Date" >= @__rangeStart_0 AND a."Date" <= @__rangeEnd_1
[21:47:33 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'MEDICSYS.Api.Data.OdontologoDbContext'.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[21:47:33 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (37ms) [Parameters=[@__odontologoId_0='?' (DbType = Guid), @__resolved_Value_1='?' (DbType = Boolean)], CommandType='Text', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."InventoryItemId", i."IsResolved", i."Message", i."OdontologoId", i."ResolvedAt", i."Type", i0."Id", i0."CreatedAt", i0."Description", i0."ExpirationDate", i0."MinimumQuantity", i0."Name", i0."OdontologoId", i0."Quantity", i0."Sku", i0."Supplier", i0."UnitPrice", i0."UpdatedAt"
FROM "InventoryAlerts" AS i
INNER JOIN "InventoryItems" AS i0 ON i."InventoryItemId" = i0."Id"
WHERE i."OdontologoId" = @__odontologoId_0 AND i."IsResolved" = @__resolved_Value_1
ORDER BY i."CreatedAt" DESC
[21:47:33 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.PatientsController.GetAll (MEDICSYS.Api) in 215.8355ms
[21:47:33 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AccountingController.GetSummary (MEDICSYS.Api) in 223.6988ms
[21:47:33 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.Odontologia.InventoryAlert, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.InventoryAlertDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:47:33 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.PatientsController.GetAll (MEDICSYS.Api)'
[21:47:33 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AccountingController.GetSummary (MEDICSYS.Api)'
[21:47:33 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/patients responded 200 in 272.8070 ms
[21:47:33 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/patients - 200 null application/json; charset=utf-8 278.5704ms
[21:47:33 ERR] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/accounting/summary responded 500 in 268.5999 ms
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MEDICSYS.Api.Controllers.AccountingController.GetSummary(Nullable`1 from, Nullable`1 to) in d:\Programación\MEDICSYS\MEDICSYS.Api\Controllers\AccountingController.cs:line 117
   at lambda_method273(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
[21:47:33 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.Odontologia.InventoryController.GetAlerts (MEDICSYS.Api) in 240.0634ms
[21:47:33 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.Odontologia.InventoryController.GetAlerts (MEDICSYS.Api)'
[21:47:33 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/odontologia/inventory/alerts responded 200 in 293.3453 ms
[21:47:33 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/odontologia/inventory/alerts?resolved=false - 200 null application/json; charset=utf-8 299.3218ms
[21:47:33 ERR] Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware: An unhandled exception has occurred while executing the request.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MEDICSYS.Api.Controllers.AccountingController.GetSummary(Nullable`1 from, Nullable`1 to) in d:\Programación\MEDICSYS\MEDICSYS.Api\Controllers\AccountingController.cs:line 117
   at lambda_method273(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[21:47:33 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/accounting/summary?from=2026-02-01&to=2026-02-28 - 500 null text/plain; charset=utf-8 362.4552ms
[21:47:33 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (10ms) [Parameters=[@__professorId_Value_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."CreatedAt", a."EndAt", a."Notes", a."PatientName", a."ProfessorId", a."Reason", a."StartAt", a."Status", a."StudentId", a."UpdatedAt", a0."Id", a0."AccessFailedCount", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."FullName", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UniversityId", a0."UserName", a1."Id", a1."AccessFailedCount", a1."ConcurrencyStamp", a1."Email", a1."EmailConfirmed", a1."FullName", a1."LockoutEnabled", a1."LockoutEnd", a1."NormalizedEmail", a1."NormalizedUserName", a1."PasswordHash", a1."PhoneNumber", a1."PhoneNumberConfirmed", a1."SecurityStamp", a1."TwoFactorEnabled", a1."UniversityId", a1."UserName"
FROM "Appointments" AS a
INNER JOIN "AspNetUsers" AS a0 ON a."StudentId" = a0."Id"
INNER JOIN "AspNetUsers" AS a1 ON a."ProfessorId" = a1."Id"
WHERE a."ProfessorId" = @__professorId_Value_0
ORDER BY a."StartAt"
[21:47:33 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.Appointment, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.AppointmentDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:47:33 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api) in 331.0743ms
[21:47:33 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api)'
[21:47:33 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/agenda/appointments responded 200 in 381.2311 ms
[21:47:33 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 200 null application/json; charset=utf-8 386.5506ms
[21:47:34 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT r."Id", r."AppointmentId", r."Channel", r."CreatedAt", r."Message", r."ScheduledAt", r."SentAt", r."Status", r."Target"
FROM "Reminders" AS r
WHERE r."Status" = 'Pending' AND r."ScheduledAt" <= @__now_0
[21:47:36 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/users/odontologos - null null
[21:47:36 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/availability?date=2026-02-03&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:47:36 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/reminders?status=Due - null null
[21:47:36 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:47:36 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:36 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:36 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:36 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:36 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/users/odontologos responded 204 in 2.8272 ms
[21:47:36 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/agenda/availability responded 204 in 3.0499 ms
[21:47:36 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/reminders responded 204 in 3.1210 ms
[21:47:36 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/users/odontologos - 204 null null 7.4767ms
[21:47:36 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/availability?date=2026-02-03&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 204 null null 8.1613ms
[21:47:36 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/reminders?status=Due - 204 null null 8.2343ms
[21:47:36 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api)'
[21:47:36 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/users/odontologos - null null
[21:47:36 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/agenda/availability?date=2026-02-03&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:47:36 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/reminders?status=Due - null null
[21:47:36 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAppointments", controller = "Agenda"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.AppointmentDto]]] GetAppointments(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid]) on controller MEDICSYS.Api.Controllers.AgendaController (MEDICSYS.Api).
[21:47:36 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:36 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:36 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:36 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.UsersController.GetOdontologos (MEDICSYS.Api)'
[21:47:36 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAvailability (MEDICSYS.Api)'
[21:47:36 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.RemindersController.GetReminders (MEDICSYS.Api)'
[21:47:36 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetOdontologos", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Controllers.UserSummaryDto]]] GetOdontologos() on controller MEDICSYS.Api.Controllers.UsersController (MEDICSYS.Api).
[21:47:36 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetReminders", controller = "Reminders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Controllers.ReminderDto]]] GetReminders(System.String) on controller MEDICSYS.Api.Controllers.RemindersController (MEDICSYS.Api).
[21:47:36 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAvailability", controller = "Agenda"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MEDICSYS.Api.Contracts.AvailabilityResponse]] GetAvailability(System.DateTime, System.Nullable`1[System.Guid], System.Nullable`1[System.Guid]) on controller MEDICSYS.Api.Controllers.AgendaController (MEDICSYS.Api).
[21:47:36 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (5ms) [Parameters=[@__professorId_Value_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."CreatedAt", a."EndAt", a."Notes", a."PatientName", a."ProfessorId", a."Reason", a."StartAt", a."Status", a."StudentId", a."UpdatedAt", a0."Id", a0."AccessFailedCount", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."FullName", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UniversityId", a0."UserName", a1."Id", a1."AccessFailedCount", a1."ConcurrencyStamp", a1."Email", a1."EmailConfirmed", a1."FullName", a1."LockoutEnabled", a1."LockoutEnd", a1."NormalizedEmail", a1."NormalizedUserName", a1."PasswordHash", a1."PhoneNumber", a1."PhoneNumberConfirmed", a1."SecurityStamp", a1."TwoFactorEnabled", a1."UniversityId", a1."UserName"
FROM "Appointments" AS a
INNER JOIN "AspNetUsers" AS a0 ON a."StudentId" = a0."Id"
INNER JOIN "AspNetUsers" AS a1 ON a."ProfessorId" = a1."Id"
WHERE a."ProfessorId" = @__professorId_Value_0
ORDER BY a."StartAt"
[21:47:36 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.Appointment, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.AppointmentDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:47:36 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api) in 109.1987ms
[21:47:36 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api)'
[21:47:36 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/agenda/appointments responded 200 in 126.5818 ms
[21:47:36 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 200 null application/json; charset=utf-8 129.9858ms
[21:47:36 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (0ms) [Parameters=[@__dayStart_0='?' (DbType = DateTime), @__dayEnd_1='?' (DbType = DateTime), @__professorId_Value_2='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."CreatedAt", a."EndAt", a."Notes", a."PatientName", a."ProfessorId", a."Reason", a."StartAt", a."Status", a."StudentId", a."UpdatedAt"
FROM "Appointments" AS a
WHERE a."StartAt" >= @__dayStart_0 AND a."StartAt" < @__dayEnd_1 AND a."ProfessorId" = @__professorId_Value_2
[21:47:36 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'MEDICSYS.Api.Data.AppDbContext'.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[21:47:36 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AgendaController.GetAvailability (MEDICSYS.Api) in 125.1649ms
[21:47:36 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAvailability (MEDICSYS.Api)'
[21:47:36 ERR] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/agenda/availability responded 500 in 148.1066 ms
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MEDICSYS.Api.Controllers.AgendaController.GetAvailability(DateTime date, Nullable`1 professorId, Nullable`1 studentId) in d:\Programación\MEDICSYS\MEDICSYS.Api\Controllers\AgendaController.cs:line 135
   at lambda_method382(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
[21:47:36 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (4ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT r."Id", r."AppointmentId", r."Channel", r."CreatedAt", r."Message", r."ScheduledAt", r."SentAt", r."Status", r."Target", a."Id", a."CreatedAt", a."EndAt", a."Notes", a."PatientName", a."ProfessorId", a."Reason", a."StartAt", a."Status", a."StudentId", a."UpdatedAt"
FROM "Reminders" AS r
INNER JOIN "Appointments" AS a ON r."AppointmentId" = a."Id"
WHERE r."Status" = @__status_0
ORDER BY r."ScheduledAt"
[21:47:36 ERR] Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware: An unhandled exception has occurred while executing the request.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MEDICSYS.Api.Controllers.AgendaController.GetAvailability(DateTime date, Nullable`1 professorId, Nullable`1 studentId) in d:\Programación\MEDICSYS\MEDICSYS.Api\Controllers\AgendaController.cs:line 135
   at lambda_method382(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[21:47:36 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.Reminder, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Controllers.ReminderDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:47:36 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.RemindersController.GetReminders (MEDICSYS.Api) in 169.1428ms
[21:47:36 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.RemindersController.GetReminders (MEDICSYS.Api)'
[21:47:36 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/agenda/availability?date=2026-02-03&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 500 null text/plain; charset=utf-8 192.4309ms
[21:47:36 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/reminders responded 200 in 189.0648 ms
[21:47:36 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/reminders?status=Due - 200 null application/json; charset=utf-8 193.9292ms
[21:47:36 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "AspNetUsers" AS a
[21:47:36 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:47:36 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:47:36 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:47:36 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:47:36 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:47:36 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:47:36 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MEDICSYS.Api.Controllers.UserSummaryDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:47:36 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.UsersController.GetOdontologos (MEDICSYS.Api) in 236.5146ms
[21:47:36 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.UsersController.GetOdontologos (MEDICSYS.Api)'
[21:47:36 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/users/odontologos responded 200 in 256.1361 ms
[21:47:36 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/users/odontologos - 200 null application/json; charset=utf-8 263.1242ms
[21:47:37 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/availability?date=2026-02-04&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:47:37 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:47:37 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:37 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:37 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/agenda/availability responded 204 in 1.6904 ms
[21:47:37 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api)'
[21:47:37 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/availability?date=2026-02-04&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 204 null null 4.3817ms
[21:47:37 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAppointments", controller = "Agenda"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.AppointmentDto]]] GetAppointments(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid]) on controller MEDICSYS.Api.Controllers.AgendaController (MEDICSYS.Api).
[21:47:37 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/agenda/availability?date=2026-02-04&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:47:37 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:37 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAvailability (MEDICSYS.Api)'
[21:47:37 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAvailability", controller = "Agenda"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MEDICSYS.Api.Contracts.AvailabilityResponse]] GetAvailability(System.DateTime, System.Nullable`1[System.Guid], System.Nullable`1[System.Guid]) on controller MEDICSYS.Api.Controllers.AgendaController (MEDICSYS.Api).
[21:47:37 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (3ms) [Parameters=[@__professorId_Value_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."CreatedAt", a."EndAt", a."Notes", a."PatientName", a."ProfessorId", a."Reason", a."StartAt", a."Status", a."StudentId", a."UpdatedAt", a0."Id", a0."AccessFailedCount", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."FullName", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UniversityId", a0."UserName", a1."Id", a1."AccessFailedCount", a1."ConcurrencyStamp", a1."Email", a1."EmailConfirmed", a1."FullName", a1."LockoutEnabled", a1."LockoutEnd", a1."NormalizedEmail", a1."NormalizedUserName", a1."PasswordHash", a1."PhoneNumber", a1."PhoneNumberConfirmed", a1."SecurityStamp", a1."TwoFactorEnabled", a1."UniversityId", a1."UserName"
FROM "Appointments" AS a
INNER JOIN "AspNetUsers" AS a0 ON a."StudentId" = a0."Id"
INNER JOIN "AspNetUsers" AS a1 ON a."ProfessorId" = a1."Id"
WHERE a."ProfessorId" = @__professorId_Value_0
ORDER BY a."StartAt"
[21:47:37 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.Appointment, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.AppointmentDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:47:37 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api) in 79.1586ms
[21:47:37 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (0ms) [Parameters=[@__dayStart_0='?' (DbType = DateTime), @__dayEnd_1='?' (DbType = DateTime), @__professorId_Value_2='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."CreatedAt", a."EndAt", a."Notes", a."PatientName", a."ProfessorId", a."Reason", a."StartAt", a."Status", a."StudentId", a."UpdatedAt"
FROM "Appointments" AS a
WHERE a."StartAt" >= @__dayStart_0 AND a."StartAt" < @__dayEnd_1 AND a."ProfessorId" = @__professorId_Value_2
[21:47:37 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api)'
[21:47:37 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/agenda/appointments responded 200 in 90.9037 ms
[21:47:37 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'MEDICSYS.Api.Data.AppDbContext'.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[21:47:37 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 200 null application/json; charset=utf-8 93.0722ms
[21:47:38 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AgendaController.GetAvailability (MEDICSYS.Api) in 98.4688ms
[21:47:38 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAvailability (MEDICSYS.Api)'
[21:47:38 ERR] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/agenda/availability responded 500 in 104.8417 ms
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MEDICSYS.Api.Controllers.AgendaController.GetAvailability(DateTime date, Nullable`1 professorId, Nullable`1 studentId) in d:\Programación\MEDICSYS\MEDICSYS.Api\Controllers\AgendaController.cs:line 135
   at lambda_method382(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
[21:47:38 ERR] Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware: An unhandled exception has occurred while executing the request.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MEDICSYS.Api.Controllers.AgendaController.GetAvailability(DateTime date, Nullable`1 professorId, Nullable`1 studentId) in d:\Programación\MEDICSYS\MEDICSYS.Api\Controllers\AgendaController.cs:line 135
   at lambda_method382(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[21:47:38 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/agenda/availability?date=2026-02-04&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 500 null text/plain; charset=utf-8 150.5183ms
[21:47:38 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:47:38 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/agenda/availability?date=2026-02-04&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:47:38 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:38 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:38 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api)'
[21:47:38 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAvailability (MEDICSYS.Api)'
[21:47:38 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAppointments", controller = "Agenda"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.AppointmentDto]]] GetAppointments(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid]) on controller MEDICSYS.Api.Controllers.AgendaController (MEDICSYS.Api).
[21:47:38 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAvailability", controller = "Agenda"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MEDICSYS.Api.Contracts.AvailabilityResponse]] GetAvailability(System.DateTime, System.Nullable`1[System.Guid], System.Nullable`1[System.Guid]) on controller MEDICSYS.Api.Controllers.AgendaController (MEDICSYS.Api).
[21:47:38 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/clinical-histories - null null
[21:47:38 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/patients - null null
[21:47:38 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:38 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/users/odontologos - null null
[21:47:38 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:38 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/clinical-histories responded 204 in 1.5182 ms
[21:47:38 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:38 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.PatientsController.GetAll (MEDICSYS.Api)'
[21:47:38 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/clinical-histories - 204 null null 5.3004ms
[21:47:38 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.UsersController.GetOdontologos (MEDICSYS.Api)'
[21:47:38 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Models.Patient]]] GetAll() on controller MEDICSYS.Api.Controllers.PatientsController (MEDICSYS.Api).
[21:47:38 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetOdontologos", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Controllers.UserSummaryDto]]] GetOdontologos() on controller MEDICSYS.Api.Controllers.UsersController (MEDICSYS.Api).
[21:47:38 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/clinical-histories - null null
[21:47:38 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:38 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetAll (MEDICSYS.Api)'
[21:47:38 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAll", controller = "ClinicalHistories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.ClinicalHistoryDto]]] GetAll() on controller MEDICSYS.Api.Controllers.ClinicalHistoriesController (MEDICSYS.Api).
[21:47:38 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (6ms) [Parameters=[@__professorId_Value_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."CreatedAt", a."EndAt", a."Notes", a."PatientName", a."ProfessorId", a."Reason", a."StartAt", a."Status", a."StudentId", a."UpdatedAt", a0."Id", a0."AccessFailedCount", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."FullName", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UniversityId", a0."UserName", a1."Id", a1."AccessFailedCount", a1."ConcurrencyStamp", a1."Email", a1."EmailConfirmed", a1."FullName", a1."LockoutEnabled", a1."LockoutEnd", a1."NormalizedEmail", a1."NormalizedUserName", a1."PasswordHash", a1."PhoneNumber", a1."PhoneNumberConfirmed", a1."SecurityStamp", a1."TwoFactorEnabled", a1."UniversityId", a1."UserName"
FROM "Appointments" AS a
INNER JOIN "AspNetUsers" AS a0 ON a."StudentId" = a0."Id"
INNER JOIN "AspNetUsers" AS a1 ON a."ProfessorId" = a1."Id"
WHERE a."ProfessorId" = @__professorId_Value_0
ORDER BY a."StartAt"
[21:47:38 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (0ms) [Parameters=[@__dayStart_0='?' (DbType = DateTime), @__dayEnd_1='?' (DbType = DateTime), @__professorId_Value_2='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."CreatedAt", a."EndAt", a."Notes", a."PatientName", a."ProfessorId", a."Reason", a."StartAt", a."Status", a."StudentId", a."UpdatedAt"
FROM "Appointments" AS a
WHERE a."StartAt" >= @__dayStart_0 AND a."StartAt" < @__dayEnd_1 AND a."ProfessorId" = @__professorId_Value_2
[21:47:38 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.Appointment, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.AppointmentDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:47:38 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'MEDICSYS.Api.Data.AppDbContext'.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[21:47:38 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api) in 128.1598ms
[21:47:38 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api)'
[21:47:38 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT p."Id", p."Address", p."Allergies", p."BloodType", p."CreatedAt", p."DateOfBirth", p."Diseases", p."Email", p."EmergencyContact", p."EmergencyPhone", p."FirstName", p."Gender", p."IdNumber", p."LastName", p."Medications", p."Notes", p."OdontologoId", p."Phone", p."UpdatedAt"
FROM "Patients" AS p
WHERE p."OdontologoId" = @__userId_0
ORDER BY p."LastName", p."FirstName"
[21:47:38 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AgendaController.GetAvailability (MEDICSYS.Api) in 143.0767ms
[21:47:38 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/agenda/appointments responded 200 in 152.6518 ms
[21:47:38 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MEDICSYS.Api.Models.Patient, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:47:38 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAvailability (MEDICSYS.Api)'
[21:47:38 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 200 null application/json; charset=utf-8 157.7436ms
[21:47:38 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.PatientsController.GetAll (MEDICSYS.Api) in 130.8974ms
[21:47:38 ERR] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/agenda/availability responded 500 in 157.9060 ms
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MEDICSYS.Api.Controllers.AgendaController.GetAvailability(DateTime date, Nullable`1 professorId, Nullable`1 studentId) in d:\Programación\MEDICSYS\MEDICSYS.Api\Controllers\AgendaController.cs:line 135
   at lambda_method382(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
[21:47:38 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.PatientsController.GetAll (MEDICSYS.Api)'
[21:47:38 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "AspNetUsers" AS a
[21:47:38 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0)
[21:47:38 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/patients responded 200 in 158.6836 ms
[21:47:38 ERR] Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware: An unhandled exception has occurred while executing the request.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MEDICSYS.Api.Controllers.AgendaController.GetAvailability(DateTime date, Nullable`1 professorId, Nullable`1 studentId) in d:\Programación\MEDICSYS\MEDICSYS.Api\Controllers\AgendaController.cs:line 135
   at lambda_method382(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[21:47:38 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/patients - 200 null application/json; charset=utf-8 163.115ms
[21:47:38 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:47:38 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__email_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."Email" = @__email_0 OR a."UserName" = @__email_0
LIMIT 1
[21:47:38 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/agenda/availability?date=2026-02-04&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 500 null text/plain; charset=utf-8 199.5623ms
[21:47:38 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:47:38 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:47:38 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:47:38 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:47:38 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:47:38 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MEDICSYS.Api.Controllers.UserSummaryDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:47:38 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.UsersController.GetOdontologos (MEDICSYS.Api) in 188.5107ms
[21:47:38 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.UsersController.GetOdontologos (MEDICSYS.Api)'
[21:47:38 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/users/odontologos responded 200 in 198.5912 ms
[21:47:38 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/users/odontologos - 200 null application/json; charset=utf-8 201.2429ms
[21:47:38 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT c."Id", c."CreatedAt", c."Data", c."PatientId", c."ReviewNotes", c."ReviewedAt", c."ReviewedById", c."Status", c."StudentId", c."SubmittedAt", c."UpdatedAt", a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "ClinicalHistories" AS c
INNER JOIN "AspNetUsers" AS a ON c."StudentId" = a."Id"
ORDER BY c."UpdatedAt" DESC
[21:47:38 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.ClinicalHistory, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.ClinicalHistoryDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:47:38 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetAll (MEDICSYS.Api) in 196.9971ms
[21:47:38 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetAll (MEDICSYS.Api)'
[21:47:38 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/clinical-histories responded 200 in 213.6691 ms
[21:47:38 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/clinical-histories - 200 null application/json; charset=utf-8 216.2439ms
[21:47:44 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/appointments - null null
[21:47:44 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:44 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/agenda/appointments responded 204 in 0.9886 ms
[21:47:44 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/appointments - 204 null null 3.0712ms
[21:47:44 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 POST http://localhost:5154/api/agenda/appointments - application/json 275
[21:47:44 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:44 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AgendaController.CreateAppointment (MEDICSYS.Api)'
[21:47:44 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "CreateAppointment", controller = "Agenda"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MEDICSYS.Api.Contracts.AppointmentDto]] CreateAppointment(MEDICSYS.Api.Contracts.AppointmentRequest) on controller MEDICSYS.Api.Controllers.AgendaController (MEDICSYS.Api).
[21:47:44 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
[21:47:44 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AgendaController.CreateAppointment (MEDICSYS.Api) in 23.8999ms
[21:47:44 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AgendaController.CreateAppointment (MEDICSYS.Api)'
[21:47:44 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP POST /api/agenda/appointments responded 400 in 34.4922 ms
[21:47:44 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 POST http://localhost:5154/api/agenda/appointments - 400 null application/problem+json; charset=utf-8 36.3762ms
[21:47:47 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 POST http://localhost:5154/api/agenda/appointments - application/json 275
[21:47:47 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:47 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AgendaController.CreateAppointment (MEDICSYS.Api)'
[21:47:47 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "CreateAppointment", controller = "Agenda"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MEDICSYS.Api.Contracts.AppointmentDto]] CreateAppointment(MEDICSYS.Api.Contracts.AppointmentRequest) on controller MEDICSYS.Api.Controllers.AgendaController (MEDICSYS.Api).
[21:47:47 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
[21:47:47 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AgendaController.CreateAppointment (MEDICSYS.Api) in 25.142ms
[21:47:47 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AgendaController.CreateAppointment (MEDICSYS.Api)'
[21:47:47 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP POST /api/agenda/appointments responded 400 in 108.5286 ms
[21:47:47 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 POST http://localhost:5154/api/agenda/appointments - 400 null application/problem+json; charset=utf-8 134.4679ms
[21:47:52 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:47:52 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/odontologia/inventory/alerts?resolved=false - null null
[21:47:52 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/accounting/summary?from=2026-02-01&to=2026-02-28 - null null
[21:47:52 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/patients - null null
[21:47:52 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:52 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:52 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:52 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:52 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/agenda/appointments responded 204 in 5.4865 ms
[21:47:52 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/odontologia/inventory/alerts responded 204 in 4.3487 ms
[21:47:52 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/accounting/summary responded 204 in 4.3911 ms
[21:47:52 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/patients responded 204 in 4.3368 ms
[21:47:52 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 204 null null 159.8416ms
[21:47:52 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/odontologia/inventory/alerts?resolved=false - 204 null null 160.1637ms
[21:47:52 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/accounting/summary?from=2026-02-01&to=2026-02-28 - 204 null null 161.1203ms
[21:47:52 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/patients - 204 null null 161.9826ms
[21:47:52 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:47:52 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/patients - null null
[21:47:52 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/accounting/summary?from=2026-02-01&to=2026-02-28 - null null
[21:47:52 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/odontologia/inventory/alerts?resolved=false - null null
[21:47:52 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:52 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:52 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:52 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.PatientsController.GetAll (MEDICSYS.Api)'
[21:47:52 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AccountingController.GetSummary (MEDICSYS.Api)'
[21:47:52 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api)'
[21:47:52 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:52 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Models.Patient]]] GetAll() on controller MEDICSYS.Api.Controllers.PatientsController (MEDICSYS.Api).
[21:47:52 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetSummary", controller = "Accounting"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MEDICSYS.Api.Contracts.AccountingSummaryDto]] GetSummary(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller MEDICSYS.Api.Controllers.AccountingController (MEDICSYS.Api).
[21:47:52 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAppointments", controller = "Agenda"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.AppointmentDto]]] GetAppointments(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid]) on controller MEDICSYS.Api.Controllers.AgendaController (MEDICSYS.Api).
[21:47:52 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.Odontologia.InventoryController.GetAlerts (MEDICSYS.Api)'
[21:47:52 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAlerts", controller = "Inventory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.InventoryAlertDto]]] GetAlerts(System.Nullable`1[System.Boolean]) on controller MEDICSYS.Api.Controllers.Odontologia.InventoryController (MEDICSYS.Api).
[21:47:52 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT p."Id", p."Address", p."Allergies", p."BloodType", p."CreatedAt", p."DateOfBirth", p."Diseases", p."Email", p."EmergencyContact", p."EmergencyPhone", p."FirstName", p."Gender", p."IdNumber", p."LastName", p."Medications", p."Notes", p."OdontologoId", p."Phone", p."UpdatedAt"
FROM "Patients" AS p
WHERE p."OdontologoId" = @__userId_0
ORDER BY p."LastName", p."FirstName"
[21:47:52 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MEDICSYS.Api.Models.Patient, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:47:52 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.PatientsController.GetAll (MEDICSYS.Api) in 85.7106ms
[21:47:52 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.PatientsController.GetAll (MEDICSYS.Api)'
[21:47:52 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/patients responded 200 in 98.6584 ms
[21:47:52 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/patients - 200 null application/json; charset=utf-8 102.2061ms
[21:47:52 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (4ms) [Parameters=[@__professorId_Value_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."CreatedAt", a."EndAt", a."Notes", a."PatientName", a."ProfessorId", a."Reason", a."StartAt", a."Status", a."StudentId", a."UpdatedAt", a0."Id", a0."AccessFailedCount", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."FullName", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UniversityId", a0."UserName", a1."Id", a1."AccessFailedCount", a1."ConcurrencyStamp", a1."Email", a1."EmailConfirmed", a1."FullName", a1."LockoutEnabled", a1."LockoutEnd", a1."NormalizedEmail", a1."NormalizedUserName", a1."PasswordHash", a1."PhoneNumber", a1."PhoneNumberConfirmed", a1."SecurityStamp", a1."TwoFactorEnabled", a1."UniversityId", a1."UserName"
FROM "Appointments" AS a
INNER JOIN "AspNetUsers" AS a0 ON a."StudentId" = a0."Id"
INNER JOIN "AspNetUsers" AS a1 ON a."ProfessorId" = a1."Id"
WHERE a."ProfessorId" = @__professorId_Value_0
ORDER BY a."StartAt"
[21:47:52 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.Appointment, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.AppointmentDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:47:52 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api) in 99.7714ms
[21:47:52 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api)'
[21:47:52 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/agenda/appointments responded 200 in 118.7786 ms
[21:47:52 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 200 null application/json; charset=utf-8 122.8324ms
[21:47:52 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (0ms) [Parameters=[@__rangeStart_0='?' (DbType = DateTime), @__rangeEnd_1='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."Amount", a."CategoryId", a."CreatedAt", a."Date", a."Description", a."InvoiceId", a."PaymentMethod", a."Reference", a."Source", a."Type", a0."Id", a0."Group", a0."IsActive", a0."MonthlyBudget", a0."Name", a0."Type"
FROM "AccountingEntries" AS a
INNER JOIN "AccountingCategories" AS a0 ON a."CategoryId" = a0."Id"
WHERE a."Date" >= @__rangeStart_0 AND a."Date" <= @__rangeEnd_1
[21:47:52 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'MEDICSYS.Api.Data.OdontologoDbContext'.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[21:47:52 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (3ms) [Parameters=[@__odontologoId_0='?' (DbType = Guid), @__resolved_Value_1='?' (DbType = Boolean)], CommandType='Text', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."InventoryItemId", i."IsResolved", i."Message", i."OdontologoId", i."ResolvedAt", i."Type", i0."Id", i0."CreatedAt", i0."Description", i0."ExpirationDate", i0."MinimumQuantity", i0."Name", i0."OdontologoId", i0."Quantity", i0."Sku", i0."Supplier", i0."UnitPrice", i0."UpdatedAt"
FROM "InventoryAlerts" AS i
INNER JOIN "InventoryItems" AS i0 ON i."InventoryItemId" = i0."Id"
WHERE i."OdontologoId" = @__odontologoId_0 AND i."IsResolved" = @__resolved_Value_1
ORDER BY i."CreatedAt" DESC
[21:47:52 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AccountingController.GetSummary (MEDICSYS.Api) in 167.2652ms
[21:47:52 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.Odontologia.InventoryAlert, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.InventoryAlertDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:47:52 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AccountingController.GetSummary (MEDICSYS.Api)'
[21:47:52 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.Odontologia.InventoryController.GetAlerts (MEDICSYS.Api) in 167.1648ms
[21:47:52 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.Odontologia.InventoryController.GetAlerts (MEDICSYS.Api)'
[21:47:52 ERR] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/accounting/summary responded 500 in 185.3242 ms
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MEDICSYS.Api.Controllers.AccountingController.GetSummary(Nullable`1 from, Nullable`1 to) in d:\Programación\MEDICSYS\MEDICSYS.Api\Controllers\AccountingController.cs:line 117
   at lambda_method273(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
[21:47:52 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/odontologia/inventory/alerts responded 200 in 185.5875 ms
[21:47:52 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/odontologia/inventory/alerts?resolved=false - 200 null application/json; charset=utf-8 205.3594ms
[21:47:52 ERR] Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware: An unhandled exception has occurred while executing the request.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MEDICSYS.Api.Controllers.AccountingController.GetSummary(Nullable`1 from, Nullable`1 to) in d:\Programación\MEDICSYS\MEDICSYS.Api\Controllers\AccountingController.cs:line 117
   at lambda_method273(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[21:47:52 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/accounting/summary?from=2026-02-01&to=2026-02-28 - 500 null text/plain; charset=utf-8 223.4907ms
[21:47:54 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/patients - null null
[21:47:54 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/clinical-histories - null null
[21:47:54 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:54 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:54 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.PatientsController.GetAll (MEDICSYS.Api)'
[21:47:54 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/clinical-histories responded 204 in 1.6832 ms
[21:47:54 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Models.Patient]]] GetAll() on controller MEDICSYS.Api.Controllers.PatientsController (MEDICSYS.Api).
[21:47:54 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/clinical-histories - 204 null null 4.6769ms
[21:47:54 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/clinical-histories - null null
[21:47:54 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:54 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetAll (MEDICSYS.Api)'
[21:47:54 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAll", controller = "ClinicalHistories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.ClinicalHistoryDto]]] GetAll() on controller MEDICSYS.Api.Controllers.ClinicalHistoriesController (MEDICSYS.Api).
[21:47:54 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT p."Id", p."Address", p."Allergies", p."BloodType", p."CreatedAt", p."DateOfBirth", p."Diseases", p."Email", p."EmergencyContact", p."EmergencyPhone", p."FirstName", p."Gender", p."IdNumber", p."LastName", p."Medications", p."Notes", p."OdontologoId", p."Phone", p."UpdatedAt"
FROM "Patients" AS p
WHERE p."OdontologoId" = @__userId_0
ORDER BY p."LastName", p."FirstName"
[21:47:54 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MEDICSYS.Api.Models.Patient, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:47:54 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0)
[21:47:54 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.PatientsController.GetAll (MEDICSYS.Api) in 97.0951ms
[21:47:54 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.PatientsController.GetAll (MEDICSYS.Api)'
[21:47:54 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__email_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."Email" = @__email_0 OR a."UserName" = @__email_0
LIMIT 1
[21:47:54 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/patients responded 200 in 105.5914 ms
[21:47:54 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/patients - 200 null application/json; charset=utf-8 109.6294ms
[21:47:54 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT c."Id", c."CreatedAt", c."Data", c."PatientId", c."ReviewNotes", c."ReviewedAt", c."ReviewedById", c."Status", c."StudentId", c."SubmittedAt", c."UpdatedAt", a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "ClinicalHistories" AS c
INNER JOIN "AspNetUsers" AS a ON c."StudentId" = a."Id"
ORDER BY c."UpdatedAt" DESC
[21:47:54 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.ClinicalHistory, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.ClinicalHistoryDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:47:54 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetAll (MEDICSYS.Api) in 103.5194ms
[21:47:54 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetAll (MEDICSYS.Api)'
[21:47:54 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/clinical-histories responded 200 in 110.6473 ms
[21:47:54 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/clinical-histories - 200 null application/json; charset=utf-8 112.3961ms
[21:47:56 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/clinical-histories/94e94686-ce8f-4519-9cb0-031650539abd - null null
[21:47:56 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:56 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/clinical-histories/94e94686-ce8f-4519-9cb0-031650539abd responded 204 in 1.0432 ms
[21:47:56 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/clinical-histories/94e94686-ce8f-4519-9cb0-031650539abd - 204 null null 3.5392ms
[21:47:56 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/clinical-histories/94e94686-ce8f-4519-9cb0-031650539abd - null null
[21:47:56 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:47:56 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetById (MEDICSYS.Api)'
[21:47:56 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetById", controller = "ClinicalHistories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MEDICSYS.Api.Contracts.ClinicalHistoryDto]] GetById(System.Guid) on controller MEDICSYS.Api.Controllers.ClinicalHistoriesController (MEDICSYS.Api).
[21:47:56 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0)
[21:47:56 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__email_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."Email" = @__email_0 OR a."UserName" = @__email_0
LIMIT 1
[21:47:56 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT c."Id", c."CreatedAt", c."Data", c."PatientId", c."ReviewNotes", c."ReviewedAt", c."ReviewedById", c."Status", c."StudentId", c."SubmittedAt", c."UpdatedAt", a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "ClinicalHistories" AS c
INNER JOIN "AspNetUsers" AS a ON c."StudentId" = a."Id"
WHERE c."Id" = @__id_0
LIMIT 1
[21:47:56 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'MEDICSYS.Api.Contracts.ClinicalHistoryDto'.
[21:47:56 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetById (MEDICSYS.Api) in 156.4277ms
[21:47:56 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetById (MEDICSYS.Api)'
[21:47:56 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/clinical-histories/94e94686-ce8f-4519-9cb0-031650539abd responded 200 in 170.5032 ms
[21:47:56 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/clinical-histories/94e94686-ce8f-4519-9cb0-031650539abd - 200 null application/json; charset=utf-8 172.6329ms
[21:48:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:48:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/patients - null null
[21:48:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/odontologia/inventory/alerts?resolved=false - null null
[21:48:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/accounting/summary?from=2026-02-01&to=2026-02-28 - null null
[21:48:08 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:08 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:08 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:08 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:08 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/agenda/appointments responded 204 in 3.4749 ms
[21:48:08 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/patients responded 204 in 3.4363 ms
[21:48:08 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/accounting/summary responded 204 in 3.3075 ms
[21:48:08 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/odontologia/inventory/alerts responded 204 in 4.5008 ms
[21:48:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 204 null null 7.861ms
[21:48:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/patients - 204 null null 7.7047ms
[21:48:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/accounting/summary?from=2026-02-01&to=2026-02-28 - 204 null null 8.3763ms
[21:48:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/odontologia/inventory/alerts?resolved=false - 204 null null 9.8251ms
[21:48:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:48:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/accounting/summary?from=2026-02-01&to=2026-02-28 - null null
[21:48:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/patients - null null
[21:48:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/odontologia/inventory/alerts?resolved=false - null null
[21:48:08 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:08 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:08 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:08 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:08 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api)'
[21:48:08 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AccountingController.GetSummary (MEDICSYS.Api)'
[21:48:08 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.PatientsController.GetAll (MEDICSYS.Api)'
[21:48:08 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.Odontologia.InventoryController.GetAlerts (MEDICSYS.Api)'
[21:48:08 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAppointments", controller = "Agenda"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.AppointmentDto]]] GetAppointments(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid]) on controller MEDICSYS.Api.Controllers.AgendaController (MEDICSYS.Api).
[21:48:08 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetSummary", controller = "Accounting"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MEDICSYS.Api.Contracts.AccountingSummaryDto]] GetSummary(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller MEDICSYS.Api.Controllers.AccountingController (MEDICSYS.Api).
[21:48:08 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Models.Patient]]] GetAll() on controller MEDICSYS.Api.Controllers.PatientsController (MEDICSYS.Api).
[21:48:08 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAlerts", controller = "Inventory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.InventoryAlertDto]]] GetAlerts(System.Nullable`1[System.Boolean]) on controller MEDICSYS.Api.Controllers.Odontologia.InventoryController (MEDICSYS.Api).
[21:48:08 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (4ms) [Parameters=[@__professorId_Value_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."CreatedAt", a."EndAt", a."Notes", a."PatientName", a."ProfessorId", a."Reason", a."StartAt", a."Status", a."StudentId", a."UpdatedAt", a0."Id", a0."AccessFailedCount", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."FullName", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UniversityId", a0."UserName", a1."Id", a1."AccessFailedCount", a1."ConcurrencyStamp", a1."Email", a1."EmailConfirmed", a1."FullName", a1."LockoutEnabled", a1."LockoutEnd", a1."NormalizedEmail", a1."NormalizedUserName", a1."PasswordHash", a1."PhoneNumber", a1."PhoneNumberConfirmed", a1."SecurityStamp", a1."TwoFactorEnabled", a1."UniversityId", a1."UserName"
FROM "Appointments" AS a
INNER JOIN "AspNetUsers" AS a0 ON a."StudentId" = a0."Id"
INNER JOIN "AspNetUsers" AS a1 ON a."ProfessorId" = a1."Id"
WHERE a."ProfessorId" = @__professorId_Value_0
ORDER BY a."StartAt"
[21:48:08 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.Appointment, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.AppointmentDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:48:08 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api) in 110.4076ms
[21:48:09 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api)'
[21:48:09 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/agenda/appointments responded 200 in 123.7692 ms
[21:48:09 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 200 null application/json; charset=utf-8 128.5366ms
[21:48:09 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (0ms) [Parameters=[@__rangeStart_0='?' (DbType = DateTime), @__rangeEnd_1='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."Amount", a."CategoryId", a."CreatedAt", a."Date", a."Description", a."InvoiceId", a."PaymentMethod", a."Reference", a."Source", a."Type", a0."Id", a0."Group", a0."IsActive", a0."MonthlyBudget", a0."Name", a0."Type"
FROM "AccountingEntries" AS a
INNER JOIN "AccountingCategories" AS a0 ON a."CategoryId" = a0."Id"
WHERE a."Date" >= @__rangeStart_0 AND a."Date" <= @__rangeEnd_1
[21:48:09 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'MEDICSYS.Api.Data.OdontologoDbContext'.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[21:48:09 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AccountingController.GetSummary (MEDICSYS.Api) in 146.2425ms
[21:48:09 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AccountingController.GetSummary (MEDICSYS.Api)'
[21:48:09 ERR] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/accounting/summary responded 500 in 161.0912 ms
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MEDICSYS.Api.Controllers.AccountingController.GetSummary(Nullable`1 from, Nullable`1 to) in d:\Programación\MEDICSYS\MEDICSYS.Api\Controllers\AccountingController.cs:line 117
   at lambda_method273(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
[21:48:09 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT p."Id", p."Address", p."Allergies", p."BloodType", p."CreatedAt", p."DateOfBirth", p."Diseases", p."Email", p."EmergencyContact", p."EmergencyPhone", p."FirstName", p."Gender", p."IdNumber", p."LastName", p."Medications", p."Notes", p."OdontologoId", p."Phone", p."UpdatedAt"
FROM "Patients" AS p
WHERE p."OdontologoId" = @__userId_0
ORDER BY p."LastName", p."FirstName"
[21:48:09 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (3ms) [Parameters=[@__odontologoId_0='?' (DbType = Guid), @__resolved_Value_1='?' (DbType = Boolean)], CommandType='Text', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."InventoryItemId", i."IsResolved", i."Message", i."OdontologoId", i."ResolvedAt", i."Type", i0."Id", i0."CreatedAt", i0."Description", i0."ExpirationDate", i0."MinimumQuantity", i0."Name", i0."OdontologoId", i0."Quantity", i0."Sku", i0."Supplier", i0."UnitPrice", i0."UpdatedAt"
FROM "InventoryAlerts" AS i
INNER JOIN "InventoryItems" AS i0 ON i."InventoryItemId" = i0."Id"
WHERE i."OdontologoId" = @__odontologoId_0 AND i."IsResolved" = @__resolved_Value_1
ORDER BY i."CreatedAt" DESC
[21:48:09 ERR] Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware: An unhandled exception has occurred while executing the request.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MEDICSYS.Api.Controllers.AccountingController.GetSummary(Nullable`1 from, Nullable`1 to) in d:\Programación\MEDICSYS\MEDICSYS.Api\Controllers\AccountingController.cs:line 117
   at lambda_method273(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[21:48:09 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MEDICSYS.Api.Models.Patient, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:48:09 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.Odontologia.InventoryAlert, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.InventoryAlertDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:48:09 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.PatientsController.GetAll (MEDICSYS.Api) in 217.2417ms
[21:48:09 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/accounting/summary?from=2026-02-01&to=2026-02-28 - 500 null text/plain; charset=utf-8 235.104ms
[21:48:09 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.Odontologia.InventoryController.GetAlerts (MEDICSYS.Api) in 217.134ms
[21:48:09 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.PatientsController.GetAll (MEDICSYS.Api)'
[21:48:09 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.Odontologia.InventoryController.GetAlerts (MEDICSYS.Api)'
[21:48:09 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/patients responded 200 in 234.5535 ms
[21:48:09 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/odontologia/inventory/alerts responded 200 in 234.5092 ms
[21:48:09 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/patients - 200 null application/json; charset=utf-8 239.6785ms
[21:48:09 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/odontologia/inventory/alerts?resolved=false - 200 null application/json; charset=utf-8 239.6991ms
[21:48:10 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/clinical-histories - null null
[21:48:11 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:11 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/clinical-histories responded 204 in 0.9662 ms
[21:48:11 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/clinical-histories - 204 null null 836.5437ms
[21:48:11 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/clinical-histories - null null
[21:48:11 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:11 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetAll (MEDICSYS.Api)'
[21:48:11 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAll", controller = "ClinicalHistories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.ClinicalHistoryDto]]] GetAll() on controller MEDICSYS.Api.Controllers.ClinicalHistoriesController (MEDICSYS.Api).
[21:48:11 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0)
[21:48:11 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__email_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."Email" = @__email_0 OR a."UserName" = @__email_0
LIMIT 1
[21:48:11 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT c."Id", c."CreatedAt", c."Data", c."PatientId", c."ReviewNotes", c."ReviewedAt", c."ReviewedById", c."Status", c."StudentId", c."SubmittedAt", c."UpdatedAt", a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "ClinicalHistories" AS c
INNER JOIN "AspNetUsers" AS a ON c."StudentId" = a."Id"
ORDER BY c."UpdatedAt" DESC
[21:48:11 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.ClinicalHistory, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.ClinicalHistoryDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:48:11 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetAll (MEDICSYS.Api) in 107.6713ms
[21:48:11 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetAll (MEDICSYS.Api)'
[21:48:11 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/clinical-histories responded 200 in 113.2748 ms
[21:48:11 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/clinical-histories - 200 null application/json; charset=utf-8 115.1361ms
[21:48:15 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/clinical-histories/94e94686-ce8f-4519-9cb0-031650539abd - null null
[21:48:15 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:15 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/clinical-histories/94e94686-ce8f-4519-9cb0-031650539abd responded 204 in 2.0257 ms
[21:48:15 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/clinical-histories/94e94686-ce8f-4519-9cb0-031650539abd - 204 null null 4.1661ms
[21:48:15 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/clinical-histories/94e94686-ce8f-4519-9cb0-031650539abd - null null
[21:48:15 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:15 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetById (MEDICSYS.Api)'
[21:48:15 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetById", controller = "ClinicalHistories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MEDICSYS.Api.Contracts.ClinicalHistoryDto]] GetById(System.Guid) on controller MEDICSYS.Api.Controllers.ClinicalHistoriesController (MEDICSYS.Api).
[21:48:15 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0)
[21:48:15 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__email_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."Email" = @__email_0 OR a."UserName" = @__email_0
LIMIT 1
[21:48:15 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT c."Id", c."CreatedAt", c."Data", c."PatientId", c."ReviewNotes", c."ReviewedAt", c."ReviewedById", c."Status", c."StudentId", c."SubmittedAt", c."UpdatedAt", a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "ClinicalHistories" AS c
INNER JOIN "AspNetUsers" AS a ON c."StudentId" = a."Id"
WHERE c."Id" = @__id_0
LIMIT 1
[21:48:15 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'MEDICSYS.Api.Contracts.ClinicalHistoryDto'.
[21:48:15 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetById (MEDICSYS.Api) in 73.9851ms
[21:48:15 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetById (MEDICSYS.Api)'
[21:48:15 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/clinical-histories/94e94686-ce8f-4519-9cb0-031650539abd responded 200 in 80.4141 ms
[21:48:15 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/clinical-histories/94e94686-ce8f-4519-9cb0-031650539abd - 200 null application/json; charset=utf-8 82.3776ms
[21:48:17 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/clinical-histories - null null
[21:48:17 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:17 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/clinical-histories responded 204 in 0.9854 ms
[21:48:17 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/clinical-histories - 204 null null 3.6399ms
[21:48:17 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/clinical-histories - null null
[21:48:17 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:17 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetAll (MEDICSYS.Api)'
[21:48:17 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAll", controller = "ClinicalHistories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.ClinicalHistoryDto]]] GetAll() on controller MEDICSYS.Api.Controllers.ClinicalHistoriesController (MEDICSYS.Api).
[21:48:17 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0)
[21:48:17 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__email_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."Email" = @__email_0 OR a."UserName" = @__email_0
LIMIT 1
[21:48:17 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT c."Id", c."CreatedAt", c."Data", c."PatientId", c."ReviewNotes", c."ReviewedAt", c."ReviewedById", c."Status", c."StudentId", c."SubmittedAt", c."UpdatedAt", a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "ClinicalHistories" AS c
INNER JOIN "AspNetUsers" AS a ON c."StudentId" = a."Id"
ORDER BY c."UpdatedAt" DESC
[21:48:17 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.ClinicalHistory, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.ClinicalHistoryDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:48:17 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetAll (MEDICSYS.Api) in 94.2972ms
[21:48:17 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetAll (MEDICSYS.Api)'
[21:48:17 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/clinical-histories responded 200 in 99.7805 ms
[21:48:17 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/clinical-histories - 200 null application/json; charset=utf-8 101.5688ms
[21:48:21 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/clinical-histories/903b0ba4-3df6-4a82-af72-bb76b2d69394 - null null
[21:48:21 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:21 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/clinical-histories/903b0ba4-3df6-4a82-af72-bb76b2d69394 responded 204 in 1.1111 ms
[21:48:21 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/clinical-histories/903b0ba4-3df6-4a82-af72-bb76b2d69394 - 204 null null 3.9398ms
[21:48:21 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 DELETE http://localhost:5154/api/clinical-histories/903b0ba4-3df6-4a82-af72-bb76b2d69394 - null null
[21:48:21 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:21 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.ClinicalHistoriesController.Delete (MEDICSYS.Api)'
[21:48:21 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "Delete", controller = "ClinicalHistories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Delete(System.Guid) on controller MEDICSYS.Api.Controllers.ClinicalHistoriesController (MEDICSYS.Api).
[21:48:21 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0)
[21:48:21 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__email_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."Email" = @__email_0 OR a."UserName" = @__email_0
LIMIT 1
[21:48:21 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT c."Id", c."CreatedAt", c."Data", c."PatientId", c."ReviewNotes", c."ReviewedAt", c."ReviewedById", c."Status", c."StudentId", c."SubmittedAt", c."UpdatedAt"
FROM "ClinicalHistories" AS c
WHERE c."Id" = @__id_0
LIMIT 1
[21:48:21 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
DELETE FROM "ClinicalHistories"
WHERE "Id" = @p0;
[21:48:21 INF] Microsoft.AspNetCore.Mvc.StatusCodeResult: Executing StatusCodeResult, setting HTTP status code 204
[21:48:21 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.ClinicalHistoriesController.Delete (MEDICSYS.Api) in 234.2526ms
[21:48:21 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.ClinicalHistoriesController.Delete (MEDICSYS.Api)'
[21:48:21 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP DELETE /api/clinical-histories/903b0ba4-3df6-4a82-af72-bb76b2d69394 responded 204 in 247.3114 ms
[21:48:21 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 DELETE http://localhost:5154/api/clinical-histories/903b0ba4-3df6-4a82-af72-bb76b2d69394 - 204 null null 249.4532ms
[21:48:21 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/clinical-histories - null null
[21:48:21 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:21 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetAll (MEDICSYS.Api)'
[21:48:21 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAll", controller = "ClinicalHistories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.ClinicalHistoryDto]]] GetAll() on controller MEDICSYS.Api.Controllers.ClinicalHistoriesController (MEDICSYS.Api).
[21:48:21 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0)
[21:48:21 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__email_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."Email" = @__email_0 OR a."UserName" = @__email_0
LIMIT 1
[21:48:21 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT c."Id", c."CreatedAt", c."Data", c."PatientId", c."ReviewNotes", c."ReviewedAt", c."ReviewedById", c."Status", c."StudentId", c."SubmittedAt", c."UpdatedAt", a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "ClinicalHistories" AS c
INNER JOIN "AspNetUsers" AS a ON c."StudentId" = a."Id"
ORDER BY c."UpdatedAt" DESC
[21:48:21 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.ClinicalHistory, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.ClinicalHistoryDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:48:21 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetAll (MEDICSYS.Api) in 71.3232ms
[21:48:21 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetAll (MEDICSYS.Api)'
[21:48:21 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/clinical-histories responded 200 in 77.7701 ms
[21:48:21 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/clinical-histories - 200 null application/json; charset=utf-8 80.0286ms
[21:48:25 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/clinical-histories/a94c1f89-5eeb-4eae-b584-b7adbad337fc - null null
[21:48:25 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:25 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/clinical-histories/a94c1f89-5eeb-4eae-b584-b7adbad337fc responded 204 in 1.0504 ms
[21:48:25 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/clinical-histories/a94c1f89-5eeb-4eae-b584-b7adbad337fc - 204 null null 3.2126ms
[21:48:25 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/clinical-histories/a94c1f89-5eeb-4eae-b584-b7adbad337fc - null null
[21:48:25 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:25 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetById (MEDICSYS.Api)'
[21:48:25 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetById", controller = "ClinicalHistories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MEDICSYS.Api.Contracts.ClinicalHistoryDto]] GetById(System.Guid) on controller MEDICSYS.Api.Controllers.ClinicalHistoriesController (MEDICSYS.Api).
[21:48:25 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0)
[21:48:25 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__email_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."Email" = @__email_0 OR a."UserName" = @__email_0
LIMIT 1
[21:48:25 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT c."Id", c."CreatedAt", c."Data", c."PatientId", c."ReviewNotes", c."ReviewedAt", c."ReviewedById", c."Status", c."StudentId", c."SubmittedAt", c."UpdatedAt", a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "ClinicalHistories" AS c
INNER JOIN "AspNetUsers" AS a ON c."StudentId" = a."Id"
WHERE c."Id" = @__id_0
LIMIT 1
[21:48:25 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'MEDICSYS.Api.Contracts.ClinicalHistoryDto'.
[21:48:25 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetById (MEDICSYS.Api) in 186.7492ms
[21:48:25 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetById (MEDICSYS.Api)'
[21:48:25 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/clinical-histories/a94c1f89-5eeb-4eae-b584-b7adbad337fc responded 200 in 192.8212 ms
[21:48:25 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/clinical-histories/a94c1f89-5eeb-4eae-b584-b7adbad337fc - 200 null application/json; charset=utf-8 194.7892ms
[21:48:34 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT r."Id", r."AppointmentId", r."Channel", r."CreatedAt", r."Message", r."ScheduledAt", r."SentAt", r."Status", r."Target"
FROM "Reminders" AS r
WHERE r."Status" = 'Pending' AND r."ScheduledAt" <= @__now_0
[21:48:51 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:48:51 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/odontologia/inventory/alerts?resolved=false - null null
[21:48:51 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:51 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:51 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/odontologia/inventory/alerts responded 204 in 1.4336 ms
[21:48:51 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/agenda/appointments responded 204 in 1.4961 ms
[21:48:51 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/accounting/summary?from=2026-02-01&to=2026-02-28 - null null
[21:48:51 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/odontologia/inventory/alerts?resolved=false - 204 null null 3.4583ms
[21:48:51 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 204 null null 5.5356ms
[21:48:51 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:51 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/patients - null null
[21:48:51 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:48:51 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/accounting/summary responded 204 in 2.1288 ms
[21:48:51 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/odontologia/inventory/alerts?resolved=false - null null
[21:48:51 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:51 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:51 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/accounting/summary?from=2026-02-01&to=2026-02-28 - 204 null null 8.4084ms
[21:48:51 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:51 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/patients responded 204 in 3.8785 ms
[21:48:51 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/accounting/summary?from=2026-02-01&to=2026-02-28 - null null
[21:48:51 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api)'
[21:48:51 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.Odontologia.InventoryController.GetAlerts (MEDICSYS.Api)'
[21:48:51 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/patients - 204 null null 8.2369ms
[21:48:51 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:51 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAppointments", controller = "Agenda"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.AppointmentDto]]] GetAppointments(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid]) on controller MEDICSYS.Api.Controllers.AgendaController (MEDICSYS.Api).
[21:48:51 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAlerts", controller = "Inventory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.InventoryAlertDto]]] GetAlerts(System.Nullable`1[System.Boolean]) on controller MEDICSYS.Api.Controllers.Odontologia.InventoryController (MEDICSYS.Api).
[21:48:51 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/patients - null null
[21:48:51 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AccountingController.GetSummary (MEDICSYS.Api)'
[21:48:51 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:51 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetSummary", controller = "Accounting"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MEDICSYS.Api.Contracts.AccountingSummaryDto]] GetSummary(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller MEDICSYS.Api.Controllers.AccountingController (MEDICSYS.Api).
[21:48:51 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.PatientsController.GetAll (MEDICSYS.Api)'
[21:48:51 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Models.Patient]]] GetAll() on controller MEDICSYS.Api.Controllers.PatientsController (MEDICSYS.Api).
[21:48:51 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (3ms) [Parameters=[@__odontologoId_0='?' (DbType = Guid), @__resolved_Value_1='?' (DbType = Boolean)], CommandType='Text', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."InventoryItemId", i."IsResolved", i."Message", i."OdontologoId", i."ResolvedAt", i."Type", i0."Id", i0."CreatedAt", i0."Description", i0."ExpirationDate", i0."MinimumQuantity", i0."Name", i0."OdontologoId", i0."Quantity", i0."Sku", i0."Supplier", i0."UnitPrice", i0."UpdatedAt"
FROM "InventoryAlerts" AS i
INNER JOIN "InventoryItems" AS i0 ON i."InventoryItemId" = i0."Id"
WHERE i."OdontologoId" = @__odontologoId_0 AND i."IsResolved" = @__resolved_Value_1
ORDER BY i."CreatedAt" DESC
[21:48:51 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (0ms) [Parameters=[@__rangeStart_0='?' (DbType = DateTime), @__rangeEnd_1='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."Amount", a."CategoryId", a."CreatedAt", a."Date", a."Description", a."InvoiceId", a."PaymentMethod", a."Reference", a."Source", a."Type", a0."Id", a0."Group", a0."IsActive", a0."MonthlyBudget", a0."Name", a0."Type"
FROM "AccountingEntries" AS a
INNER JOIN "AccountingCategories" AS a0 ON a."CategoryId" = a0."Id"
WHERE a."Date" >= @__rangeStart_0 AND a."Date" <= @__rangeEnd_1
[21:48:51 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT p."Id", p."Address", p."Allergies", p."BloodType", p."CreatedAt", p."DateOfBirth", p."Diseases", p."Email", p."EmergencyContact", p."EmergencyPhone", p."FirstName", p."Gender", p."IdNumber", p."LastName", p."Medications", p."Notes", p."OdontologoId", p."Phone", p."UpdatedAt"
FROM "Patients" AS p
WHERE p."OdontologoId" = @__userId_0
ORDER BY p."LastName", p."FirstName"
[21:48:51 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[@__professorId_Value_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."CreatedAt", a."EndAt", a."Notes", a."PatientName", a."ProfessorId", a."Reason", a."StartAt", a."Status", a."StudentId", a."UpdatedAt", a0."Id", a0."AccessFailedCount", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."FullName", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UniversityId", a0."UserName", a1."Id", a1."AccessFailedCount", a1."ConcurrencyStamp", a1."Email", a1."EmailConfirmed", a1."FullName", a1."LockoutEnabled", a1."LockoutEnd", a1."NormalizedEmail", a1."NormalizedUserName", a1."PasswordHash", a1."PhoneNumber", a1."PhoneNumberConfirmed", a1."SecurityStamp", a1."TwoFactorEnabled", a1."UniversityId", a1."UserName"
FROM "Appointments" AS a
INNER JOIN "AspNetUsers" AS a0 ON a."StudentId" = a0."Id"
INNER JOIN "AspNetUsers" AS a1 ON a."ProfessorId" = a1."Id"
WHERE a."ProfessorId" = @__professorId_Value_0
ORDER BY a."StartAt"
[21:48:52 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.Odontologia.InventoryAlert, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.InventoryAlertDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:48:52 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'MEDICSYS.Api.Data.OdontologoDbContext'.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[21:48:52 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MEDICSYS.Api.Models.Patient, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:48:52 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.Appointment, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.AppointmentDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:48:52 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.Odontologia.InventoryController.GetAlerts (MEDICSYS.Api) in 1033.5733ms
[21:48:52 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AccountingController.GetSummary (MEDICSYS.Api) in 1051.7928ms
[21:48:52 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.PatientsController.GetAll (MEDICSYS.Api) in 1050.2604ms
[21:48:52 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api) in 1061.1473ms
[21:48:52 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.Odontologia.InventoryController.GetAlerts (MEDICSYS.Api)'
[21:48:52 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AccountingController.GetSummary (MEDICSYS.Api)'
[21:48:52 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.PatientsController.GetAll (MEDICSYS.Api)'
[21:48:52 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api)'
[21:48:52 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/odontologia/inventory/alerts responded 200 in 1075.4872 ms
[21:48:52 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/patients responded 200 in 1065.0335 ms
[21:48:52 ERR] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/accounting/summary responded 500 in 1072.2424 ms
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MEDICSYS.Api.Controllers.AccountingController.GetSummary(Nullable`1 from, Nullable`1 to) in d:\Programación\MEDICSYS\MEDICSYS.Api\Controllers\AccountingController.cs:line 117
   at lambda_method273(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
[21:48:52 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/agenda/appointments responded 200 in 1080.6695 ms
[21:48:52 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/odontologia/inventory/alerts?resolved=false - 200 null application/json; charset=utf-8 1082.5981ms
[21:48:52 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/patients - 200 null application/json; charset=utf-8 1073.5823ms
[21:48:52 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 200 null application/json; charset=utf-8 1103.3ms
[21:48:52 ERR] Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware: An unhandled exception has occurred while executing the request.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MEDICSYS.Api.Controllers.AccountingController.GetSummary(Nullable`1 from, Nullable`1 to) in d:\Programación\MEDICSYS\MEDICSYS.Api\Controllers\AccountingController.cs:line 117
   at lambda_method273(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[21:48:52 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/accounting/summary?from=2026-02-01&to=2026-02-28 - 500 null text/plain; charset=utf-8 1116.11ms
[21:48:55 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/odontologia/inventory - null null
[21:48:55 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/odontologia/inventory/alerts?resolved=false - null null
[21:48:55 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:55 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:55 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/odontologia/inventory responded 204 in 1.5584 ms
[21:48:55 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.Odontologia.InventoryController.GetAlerts (MEDICSYS.Api)'
[21:48:55 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/odontologia/inventory - 204 null null 4.0505ms
[21:48:55 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAlerts", controller = "Inventory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.InventoryAlertDto]]] GetAlerts(System.Nullable`1[System.Boolean]) on controller MEDICSYS.Api.Controllers.Odontologia.InventoryController (MEDICSYS.Api).
[21:48:55 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/odontologia/inventory - null null
[21:48:55 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:55 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.Odontologia.InventoryController.GetAll (MEDICSYS.Api)'
[21:48:55 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAll", controller = "Inventory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.InventoryItemDto]]] GetAll() on controller MEDICSYS.Api.Controllers.Odontologia.InventoryController (MEDICSYS.Api).
[21:48:55 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (3ms) [Parameters=[@__odontologoId_0='?' (DbType = Guid), @__resolved_Value_1='?' (DbType = Boolean)], CommandType='Text', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."InventoryItemId", i."IsResolved", i."Message", i."OdontologoId", i."ResolvedAt", i."Type", i0."Id", i0."CreatedAt", i0."Description", i0."ExpirationDate", i0."MinimumQuantity", i0."Name", i0."OdontologoId", i0."Quantity", i0."Sku", i0."Supplier", i0."UnitPrice", i0."UpdatedAt"
FROM "InventoryAlerts" AS i
INNER JOIN "InventoryItems" AS i0 ON i."InventoryItemId" = i0."Id"
WHERE i."OdontologoId" = @__odontologoId_0 AND i."IsResolved" = @__resolved_Value_1
ORDER BY i."CreatedAt" DESC
[21:48:55 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.Odontologia.InventoryAlert, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.InventoryAlertDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:48:55 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.Odontologia.InventoryController.GetAlerts (MEDICSYS.Api) in 78.6081ms
[21:48:55 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.Odontologia.InventoryController.GetAlerts (MEDICSYS.Api)'
[21:48:55 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/odontologia/inventory/alerts responded 200 in 85.7218 ms
[21:48:55 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/odontologia/inventory/alerts?resolved=false - 200 null application/json; charset=utf-8 87.5693ms
[21:48:55 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__odontologoId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Description", i."ExpirationDate", i."MinimumQuantity", i."Name", i."OdontologoId", i."Quantity", i."Sku", i."Supplier", i."UnitPrice", i."UpdatedAt"
FROM "InventoryItems" AS i
WHERE i."OdontologoId" = @__odontologoId_0
ORDER BY i."Name"
[21:48:55 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.Odontologia.InventoryItem, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.InventoryItemDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:48:55 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.Odontologia.InventoryController.GetAll (MEDICSYS.Api) in 83.0058ms
[21:48:55 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.Odontologia.InventoryController.GetAll (MEDICSYS.Api)'
[21:48:55 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/odontologia/inventory responded 200 in 94.9457 ms
[21:48:55 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/odontologia/inventory - 200 null application/json; charset=utf-8 98.1215ms
[21:48:59 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/odontologia/inventory/alerts?resolved=false - null null
[21:48:59 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/odontologia/inventory - null null
[21:48:59 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:59 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:59 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/odontologia/inventory/alerts responded 204 in 1.8109 ms
[21:48:59 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.Odontologia.InventoryController.GetAll (MEDICSYS.Api)'
[21:48:59 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/odontologia/inventory/alerts?resolved=false - 204 null null 4.77ms
[21:48:59 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAll", controller = "Inventory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.InventoryItemDto]]] GetAll() on controller MEDICSYS.Api.Controllers.Odontologia.InventoryController (MEDICSYS.Api).
[21:48:59 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/odontologia/inventory/alerts?resolved=false - null null
[21:48:59 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:48:59 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.Odontologia.InventoryController.GetAlerts (MEDICSYS.Api)'
[21:48:59 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAlerts", controller = "Inventory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.InventoryAlertDto]]] GetAlerts(System.Nullable`1[System.Boolean]) on controller MEDICSYS.Api.Controllers.Odontologia.InventoryController (MEDICSYS.Api).
[21:48:59 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[@__odontologoId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Description", i."ExpirationDate", i."MinimumQuantity", i."Name", i."OdontologoId", i."Quantity", i."Sku", i."Supplier", i."UnitPrice", i."UpdatedAt"
FROM "InventoryItems" AS i
WHERE i."OdontologoId" = @__odontologoId_0
ORDER BY i."Name"
[21:48:59 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.Odontologia.InventoryItem, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.InventoryItemDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:48:59 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.Odontologia.InventoryController.GetAll (MEDICSYS.Api) in 76.6008ms
[21:48:59 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.Odontologia.InventoryController.GetAll (MEDICSYS.Api)'
[21:48:59 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/odontologia/inventory responded 200 in 85.4175 ms
[21:48:59 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/odontologia/inventory - 200 null application/json; charset=utf-8 88.0901ms
[21:48:59 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (3ms) [Parameters=[@__odontologoId_0='?' (DbType = Guid), @__resolved_Value_1='?' (DbType = Boolean)], CommandType='Text', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."InventoryItemId", i."IsResolved", i."Message", i."OdontologoId", i."ResolvedAt", i."Type", i0."Id", i0."CreatedAt", i0."Description", i0."ExpirationDate", i0."MinimumQuantity", i0."Name", i0."OdontologoId", i0."Quantity", i0."Sku", i0."Supplier", i0."UnitPrice", i0."UpdatedAt"
FROM "InventoryAlerts" AS i
INNER JOIN "InventoryItems" AS i0 ON i."InventoryItemId" = i0."Id"
WHERE i."OdontologoId" = @__odontologoId_0 AND i."IsResolved" = @__resolved_Value_1
ORDER BY i."CreatedAt" DESC
[21:48:59 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.Odontologia.InventoryAlert, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.InventoryAlertDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:48:59 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.Odontologia.InventoryController.GetAlerts (MEDICSYS.Api) in 87.2365ms
[21:48:59 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.Odontologia.InventoryController.GetAlerts (MEDICSYS.Api)'
[21:48:59 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/odontologia/inventory/alerts responded 200 in 119.3798 ms
[21:48:59 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/odontologia/inventory/alerts?resolved=false - 200 null application/json; charset=utf-8 123.1303ms
[21:49:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/auth/login - null null
[21:49:08 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:08 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/auth/login responded 204 in 0.9350 ms
[21:49:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/auth/login - 204 null null 2.9109ms
[21:49:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 POST http://localhost:5154/api/auth/login - application/json 63
[21:49:08 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:08 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AuthController.Login (MEDICSYS.Api)'
[21:49:08 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MEDICSYS.Api.Contracts.AuthResponse]] Login(MEDICSYS.Api.Contracts.AuthLoginRequest) on controller MEDICSYS.Api.Controllers.AuthController (MEDICSYS.Api).
[21:49:08 INF] MEDICSYS.Api.Controllers.AuthController: Intento de login para odontologo@medicsys.com
[21:49:08 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
[21:49:08 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:49:08 INF] MEDICSYS.Api.Controllers.AuthController: Usuario 855409da-22ad-4a15-9c3e-7970c0cb9c4e inició sesión como Odontologo
[21:49:08 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'MEDICSYS.Api.Contracts.AuthResponse'.
[21:49:08 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AuthController.Login (MEDICSYS.Api) in 138.3591ms
[21:49:08 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AuthController.Login (MEDICSYS.Api)'
[21:49:08 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP POST /api/auth/login responded 200 in 143.7375 ms
[21:49:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 POST http://localhost:5154/api/auth/login - 200 null application/json; charset=utf-8 146.8679ms
[21:49:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:49:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/patients - null null
[21:49:08 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:08 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:08 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/agenda/appointments responded 204 in 1.6046 ms
[21:49:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/odontologia/inventory/alerts?resolved=false - null null
[21:49:08 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/patients responded 204 in 1.5264 ms
[21:49:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/accounting/summary?from=2026-02-01&to=2026-02-28 - null null
[21:49:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 204 null null 4.6031ms
[21:49:08 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/patients - 204 null null 6.0537ms
[21:49:08 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:49:08 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/odontologia/inventory/alerts responded 204 in 3.5866 ms
[21:49:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/patients - null null
[21:49:08 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/accounting/summary responded 204 in 3.3354 ms
[21:49:08 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/odontologia/inventory/alerts?resolved=false - 204 null null 9.9784ms
[21:49:08 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/accounting/summary?from=2026-02-01&to=2026-02-28 - 204 null null 11.227ms
[21:49:08 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api)'
[21:49:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/odontologia/inventory/alerts?resolved=false - null null
[21:49:08 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.PatientsController.GetAll (MEDICSYS.Api)'
[21:49:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/accounting/summary?from=2026-02-01&to=2026-02-28 - null null
[21:49:08 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAppointments", controller = "Agenda"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.AppointmentDto]]] GetAppointments(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid]) on controller MEDICSYS.Api.Controllers.AgendaController (MEDICSYS.Api).
[21:49:08 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:08 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Models.Patient]]] GetAll() on controller MEDICSYS.Api.Controllers.PatientsController (MEDICSYS.Api).
[21:49:08 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:08 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.Odontologia.InventoryController.GetAlerts (MEDICSYS.Api)'
[21:49:08 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AccountingController.GetSummary (MEDICSYS.Api)'
[21:49:08 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAlerts", controller = "Inventory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.InventoryAlertDto]]] GetAlerts(System.Nullable`1[System.Boolean]) on controller MEDICSYS.Api.Controllers.Odontologia.InventoryController (MEDICSYS.Api).
[21:49:08 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetSummary", controller = "Accounting"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MEDICSYS.Api.Contracts.AccountingSummaryDto]] GetSummary(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller MEDICSYS.Api.Controllers.AccountingController (MEDICSYS.Api).
[21:49:08 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (5ms) [Parameters=[@__professorId_Value_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."CreatedAt", a."EndAt", a."Notes", a."PatientName", a."ProfessorId", a."Reason", a."StartAt", a."Status", a."StudentId", a."UpdatedAt", a0."Id", a0."AccessFailedCount", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."FullName", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UniversityId", a0."UserName", a1."Id", a1."AccessFailedCount", a1."ConcurrencyStamp", a1."Email", a1."EmailConfirmed", a1."FullName", a1."LockoutEnabled", a1."LockoutEnd", a1."NormalizedEmail", a1."NormalizedUserName", a1."PasswordHash", a1."PhoneNumber", a1."PhoneNumberConfirmed", a1."SecurityStamp", a1."TwoFactorEnabled", a1."UniversityId", a1."UserName"
FROM "Appointments" AS a
INNER JOIN "AspNetUsers" AS a0 ON a."StudentId" = a0."Id"
INNER JOIN "AspNetUsers" AS a1 ON a."ProfessorId" = a1."Id"
WHERE a."ProfessorId" = @__professorId_Value_0
ORDER BY a."StartAt"
[21:49:08 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.Appointment, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.AppointmentDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:49:08 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT p."Id", p."Address", p."Allergies", p."BloodType", p."CreatedAt", p."DateOfBirth", p."Diseases", p."Email", p."EmergencyContact", p."EmergencyPhone", p."FirstName", p."Gender", p."IdNumber", p."LastName", p."Medications", p."Notes", p."OdontologoId", p."Phone", p."UpdatedAt"
FROM "Patients" AS p
WHERE p."OdontologoId" = @__userId_0
ORDER BY p."LastName", p."FirstName"
[21:49:08 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api) in 121.1886ms
[21:49:08 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MEDICSYS.Api.Models.Patient, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:49:08 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api)'
[21:49:08 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.PatientsController.GetAll (MEDICSYS.Api) in 122.4954ms
[21:49:08 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/agenda/appointments responded 200 in 136.8878 ms
[21:49:08 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.PatientsController.GetAll (MEDICSYS.Api)'
[21:49:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 200 null application/json; charset=utf-8 142.5992ms
[21:49:08 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/patients responded 200 in 137.5345 ms
[21:49:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/patients - 200 null application/json; charset=utf-8 143.4791ms
[21:49:08 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (6ms) [Parameters=[@__odontologoId_0='?' (DbType = Guid), @__resolved_Value_1='?' (DbType = Boolean)], CommandType='Text', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."InventoryItemId", i."IsResolved", i."Message", i."OdontologoId", i."ResolvedAt", i."Type", i0."Id", i0."CreatedAt", i0."Description", i0."ExpirationDate", i0."MinimumQuantity", i0."Name", i0."OdontologoId", i0."Quantity", i0."Sku", i0."Supplier", i0."UnitPrice", i0."UpdatedAt"
FROM "InventoryAlerts" AS i
INNER JOIN "InventoryItems" AS i0 ON i."InventoryItemId" = i0."Id"
WHERE i."OdontologoId" = @__odontologoId_0 AND i."IsResolved" = @__resolved_Value_1
ORDER BY i."CreatedAt" DESC
[21:49:08 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.Odontologia.InventoryAlert, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.InventoryAlertDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:49:08 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.Odontologia.InventoryController.GetAlerts (MEDICSYS.Api) in 145.7059ms
[21:49:08 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.Odontologia.InventoryController.GetAlerts (MEDICSYS.Api)'
[21:49:08 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/odontologia/inventory/alerts responded 200 in 158.4618 ms
[21:49:08 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (0ms) [Parameters=[@__rangeStart_0='?' (DbType = DateTime), @__rangeEnd_1='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."Amount", a."CategoryId", a."CreatedAt", a."Date", a."Description", a."InvoiceId", a."PaymentMethod", a."Reference", a."Source", a."Type", a0."Id", a0."Group", a0."IsActive", a0."MonthlyBudget", a0."Name", a0."Type"
FROM "AccountingEntries" AS a
INNER JOIN "AccountingCategories" AS a0 ON a."CategoryId" = a0."Id"
WHERE a."Date" >= @__rangeStart_0 AND a."Date" <= @__rangeEnd_1
[21:49:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/odontologia/inventory/alerts?resolved=false - 200 null application/json; charset=utf-8 178.6966ms
[21:49:08 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'MEDICSYS.Api.Data.OdontologoDbContext'.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[21:49:08 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AccountingController.GetSummary (MEDICSYS.Api) in 180.1474ms
[21:49:08 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AccountingController.GetSummary (MEDICSYS.Api)'
[21:49:08 ERR] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/accounting/summary responded 500 in 192.3559 ms
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MEDICSYS.Api.Controllers.AccountingController.GetSummary(Nullable`1 from, Nullable`1 to) in d:\Programación\MEDICSYS\MEDICSYS.Api\Controllers\AccountingController.cs:line 117
   at lambda_method273(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
[21:49:08 ERR] Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware: An unhandled exception has occurred while executing the request.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MEDICSYS.Api.Controllers.AccountingController.GetSummary(Nullable`1 from, Nullable`1 to) in d:\Programación\MEDICSYS\MEDICSYS.Api\Controllers\AccountingController.cs:line 117
   at lambda_method273(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[21:49:08 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/accounting/summary?from=2026-02-01&to=2026-02-28 - 500 null text/plain; charset=utf-8 231.7981ms
[21:49:12 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/users/odontologos - null null
[21:49:12 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/availability?date=2026-02-03&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:49:12 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:12 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/reminders?status=Due - null null
[21:49:12 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:49:12 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:12 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/users/odontologos responded 204 in 1.6897 ms
[21:49:12 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:12 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:12 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/agenda/availability responded 204 in 3.2336 ms
[21:49:12 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/users/odontologos - 204 null null 5.9805ms
[21:49:12 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/reminders responded 204 in 3.1793 ms
[21:49:12 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api)'
[21:49:12 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/availability?date=2026-02-03&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 204 null null 7.8924ms
[21:49:12 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/users/odontologos - null null
[21:49:12 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/reminders?status=Due - 204 null null 9.2316ms
[21:49:12 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAppointments", controller = "Agenda"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.AppointmentDto]]] GetAppointments(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid]) on controller MEDICSYS.Api.Controllers.AgendaController (MEDICSYS.Api).
[21:49:12 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/agenda/availability?date=2026-02-03&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:49:12 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:12 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/reminders?status=Due - null null
[21:49:12 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:12 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.UsersController.GetOdontologos (MEDICSYS.Api)'
[21:49:12 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:12 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAvailability (MEDICSYS.Api)'
[21:49:12 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetOdontologos", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Controllers.UserSummaryDto]]] GetOdontologos() on controller MEDICSYS.Api.Controllers.UsersController (MEDICSYS.Api).
[21:49:12 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.RemindersController.GetReminders (MEDICSYS.Api)'
[21:49:12 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAvailability", controller = "Agenda"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MEDICSYS.Api.Contracts.AvailabilityResponse]] GetAvailability(System.DateTime, System.Nullable`1[System.Guid], System.Nullable`1[System.Guid]) on controller MEDICSYS.Api.Controllers.AgendaController (MEDICSYS.Api).
[21:49:12 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetReminders", controller = "Reminders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Controllers.ReminderDto]]] GetReminders(System.String) on controller MEDICSYS.Api.Controllers.RemindersController (MEDICSYS.Api).
[21:49:13 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (4ms) [Parameters=[@__professorId_Value_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."CreatedAt", a."EndAt", a."Notes", a."PatientName", a."ProfessorId", a."Reason", a."StartAt", a."Status", a."StudentId", a."UpdatedAt", a0."Id", a0."AccessFailedCount", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."FullName", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UniversityId", a0."UserName", a1."Id", a1."AccessFailedCount", a1."ConcurrencyStamp", a1."Email", a1."EmailConfirmed", a1."FullName", a1."LockoutEnabled", a1."LockoutEnd", a1."NormalizedEmail", a1."NormalizedUserName", a1."PasswordHash", a1."PhoneNumber", a1."PhoneNumberConfirmed", a1."SecurityStamp", a1."TwoFactorEnabled", a1."UniversityId", a1."UserName"
FROM "Appointments" AS a
INNER JOIN "AspNetUsers" AS a0 ON a."StudentId" = a0."Id"
INNER JOIN "AspNetUsers" AS a1 ON a."ProfessorId" = a1."Id"
WHERE a."ProfessorId" = @__professorId_Value_0
ORDER BY a."StartAt"
[21:49:13 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.Appointment, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.AppointmentDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:49:13 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api) in 106.7347ms
[21:49:13 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api)'
[21:49:13 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/agenda/appointments responded 200 in 119.4053 ms
[21:49:13 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 200 null application/json; charset=utf-8 123.8087ms
[21:49:13 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "AspNetUsers" AS a
[21:49:13 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:49:13 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:49:13 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:49:13 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (1ms) [Parameters=[@__dayStart_0='?' (DbType = DateTime), @__dayEnd_1='?' (DbType = DateTime), @__professorId_Value_2='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."CreatedAt", a."EndAt", a."Notes", a."PatientName", a."ProfessorId", a."Reason", a."StartAt", a."Status", a."StudentId", a."UpdatedAt"
FROM "Appointments" AS a
WHERE a."StartAt" >= @__dayStart_0 AND a."StartAt" < @__dayEnd_1 AND a."ProfessorId" = @__professorId_Value_2
[21:49:13 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:49:13 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'MEDICSYS.Api.Data.AppDbContext'.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[21:49:13 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:49:13 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AgendaController.GetAvailability (MEDICSYS.Api) in 139.7383ms
[21:49:13 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAvailability (MEDICSYS.Api)'
[21:49:13 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:49:13 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (3ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT r."Id", r."AppointmentId", r."Channel", r."CreatedAt", r."Message", r."ScheduledAt", r."SentAt", r."Status", r."Target", a."Id", a."CreatedAt", a."EndAt", a."Notes", a."PatientName", a."ProfessorId", a."Reason", a."StartAt", a."Status", a."StudentId", a."UpdatedAt"
FROM "Reminders" AS r
INNER JOIN "Appointments" AS a ON r."AppointmentId" = a."Id"
WHERE r."Status" = @__status_0
ORDER BY r."ScheduledAt"
[21:49:13 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MEDICSYS.Api.Controllers.UserSummaryDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:49:13 ERR] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/agenda/availability responded 500 in 151.5909 ms
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MEDICSYS.Api.Controllers.AgendaController.GetAvailability(DateTime date, Nullable`1 professorId, Nullable`1 studentId) in d:\Programación\MEDICSYS\MEDICSYS.Api\Controllers\AgendaController.cs:line 135
   at lambda_method382(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
[21:49:13 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.Reminder, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Controllers.ReminderDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:49:13 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.UsersController.GetOdontologos (MEDICSYS.Api) in 149.4153ms
[21:49:13 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.RemindersController.GetReminders (MEDICSYS.Api) in 160.8659ms
[21:49:13 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.UsersController.GetOdontologos (MEDICSYS.Api)'
[21:49:13 ERR] Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware: An unhandled exception has occurred while executing the request.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MEDICSYS.Api.Controllers.AgendaController.GetAvailability(DateTime date, Nullable`1 professorId, Nullable`1 studentId) in d:\Programación\MEDICSYS\MEDICSYS.Api\Controllers\AgendaController.cs:line 135
   at lambda_method382(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[21:49:13 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.RemindersController.GetReminders (MEDICSYS.Api)'
[21:49:13 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/users/odontologos responded 200 in 177.4149 ms
[21:49:13 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/reminders responded 200 in 188.8272 ms
[21:49:13 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/users/odontologos - 200 null application/json; charset=utf-8 196.9127ms
[21:49:13 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/reminders?status=Due - 200 null application/json; charset=utf-8 193.6304ms
[21:49:13 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/agenda/availability?date=2026-02-03&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 500 null text/plain; charset=utf-8 195.1637ms
[21:49:14 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/availability?date=2026-02-05&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:49:14 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:49:14 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:14 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:14 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/agenda/availability responded 204 in 1.6514 ms
[21:49:14 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/agenda/appointments responded 204 in 1.6497 ms
[21:49:14 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/availability?date=2026-02-05&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 204 null null 4.4035ms
[21:49:14 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 204 null null 4.9199ms
[21:49:14 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/agenda/availability?date=2026-02-05&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:49:14 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:49:14 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:14 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:14 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAvailability (MEDICSYS.Api)'
[21:49:14 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api)'
[21:49:14 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAvailability", controller = "Agenda"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MEDICSYS.Api.Contracts.AvailabilityResponse]] GetAvailability(System.DateTime, System.Nullable`1[System.Guid], System.Nullable`1[System.Guid]) on controller MEDICSYS.Api.Controllers.AgendaController (MEDICSYS.Api).
[21:49:14 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAppointments", controller = "Agenda"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.AppointmentDto]]] GetAppointments(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid]) on controller MEDICSYS.Api.Controllers.AgendaController (MEDICSYS.Api).
[21:49:14 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (0ms) [Parameters=[@__dayStart_0='?' (DbType = DateTime), @__dayEnd_1='?' (DbType = DateTime), @__professorId_Value_2='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."CreatedAt", a."EndAt", a."Notes", a."PatientName", a."ProfessorId", a."Reason", a."StartAt", a."Status", a."StudentId", a."UpdatedAt"
FROM "Appointments" AS a
WHERE a."StartAt" >= @__dayStart_0 AND a."StartAt" < @__dayEnd_1 AND a."ProfessorId" = @__professorId_Value_2
[21:49:14 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'MEDICSYS.Api.Data.AppDbContext'.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[21:49:14 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (4ms) [Parameters=[@__professorId_Value_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."CreatedAt", a."EndAt", a."Notes", a."PatientName", a."ProfessorId", a."Reason", a."StartAt", a."Status", a."StudentId", a."UpdatedAt", a0."Id", a0."AccessFailedCount", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."FullName", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UniversityId", a0."UserName", a1."Id", a1."AccessFailedCount", a1."ConcurrencyStamp", a1."Email", a1."EmailConfirmed", a1."FullName", a1."LockoutEnabled", a1."LockoutEnd", a1."NormalizedEmail", a1."NormalizedUserName", a1."PasswordHash", a1."PhoneNumber", a1."PhoneNumberConfirmed", a1."SecurityStamp", a1."TwoFactorEnabled", a1."UniversityId", a1."UserName"
FROM "Appointments" AS a
INNER JOIN "AspNetUsers" AS a0 ON a."StudentId" = a0."Id"
INNER JOIN "AspNetUsers" AS a1 ON a."ProfessorId" = a1."Id"
WHERE a."ProfessorId" = @__professorId_Value_0
ORDER BY a."StartAt"
[21:49:14 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AgendaController.GetAvailability (MEDICSYS.Api) in 104.7322ms
[21:49:14 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.Appointment, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.AppointmentDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:49:14 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAvailability (MEDICSYS.Api)'
[21:49:14 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api) in 108.9372ms
[21:49:14 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api)'
[21:49:14 ERR] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/agenda/availability responded 500 in 117.4164 ms
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MEDICSYS.Api.Controllers.AgendaController.GetAvailability(DateTime date, Nullable`1 professorId, Nullable`1 studentId) in d:\Programación\MEDICSYS\MEDICSYS.Api\Controllers\AgendaController.cs:line 135
   at lambda_method382(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
[21:49:14 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/agenda/appointments responded 200 in 118.2727 ms
[21:49:14 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 200 null application/json; charset=utf-8 136.9108ms
[21:49:14 ERR] Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware: An unhandled exception has occurred while executing the request.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MEDICSYS.Api.Controllers.AgendaController.GetAvailability(DateTime date, Nullable`1 professorId, Nullable`1 studentId) in d:\Programación\MEDICSYS\MEDICSYS.Api\Controllers\AgendaController.cs:line 135
   at lambda_method382(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[21:49:14 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:49:14 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/patients - null null
[21:49:14 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/clinical-histories - null null
[21:49:14 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/users/odontologos - null null
[21:49:14 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:14 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:14 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/agenda/availability?date=2026-02-05&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 500 null text/plain; charset=utf-8 158.1118ms
[21:49:14 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:14 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:14 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api)'
[21:49:14 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/patients responded 204 in 3.8007 ms
[21:49:14 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/agenda/availability?date=2026-02-05&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:49:14 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/clinical-histories responded 204 in 4.3849 ms
[21:49:14 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.UsersController.GetOdontologos (MEDICSYS.Api)'
[21:49:14 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAppointments", controller = "Agenda"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.AppointmentDto]]] GetAppointments(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid]) on controller MEDICSYS.Api.Controllers.AgendaController (MEDICSYS.Api).
[21:49:14 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/patients - 204 null null 15.8896ms
[21:49:14 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:14 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/clinical-histories - 204 null null 17.0111ms
[21:49:14 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetOdontologos", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Controllers.UserSummaryDto]]] GetOdontologos() on controller MEDICSYS.Api.Controllers.UsersController (MEDICSYS.Api).
[21:49:14 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/patients - null null
[21:49:14 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAvailability (MEDICSYS.Api)'
[21:49:14 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/clinical-histories - null null
[21:49:14 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:14 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAvailability", controller = "Agenda"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MEDICSYS.Api.Contracts.AvailabilityResponse]] GetAvailability(System.DateTime, System.Nullable`1[System.Guid], System.Nullable`1[System.Guid]) on controller MEDICSYS.Api.Controllers.AgendaController (MEDICSYS.Api).
[21:49:14 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:14 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.PatientsController.GetAll (MEDICSYS.Api)'
[21:49:14 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetAll (MEDICSYS.Api)'
[21:49:14 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Models.Patient]]] GetAll() on controller MEDICSYS.Api.Controllers.PatientsController (MEDICSYS.Api).
[21:49:14 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAll", controller = "ClinicalHistories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.ClinicalHistoryDto]]] GetAll() on controller MEDICSYS.Api.Controllers.ClinicalHistoriesController (MEDICSYS.Api).
[21:49:14 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (5ms) [Parameters=[@__professorId_Value_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."CreatedAt", a."EndAt", a."Notes", a."PatientName", a."ProfessorId", a."Reason", a."StartAt", a."Status", a."StudentId", a."UpdatedAt", a0."Id", a0."AccessFailedCount", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."FullName", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UniversityId", a0."UserName", a1."Id", a1."AccessFailedCount", a1."ConcurrencyStamp", a1."Email", a1."EmailConfirmed", a1."FullName", a1."LockoutEnabled", a1."LockoutEnd", a1."NormalizedEmail", a1."NormalizedUserName", a1."PasswordHash", a1."PhoneNumber", a1."PhoneNumberConfirmed", a1."SecurityStamp", a1."TwoFactorEnabled", a1."UniversityId", a1."UserName"
FROM "Appointments" AS a
INNER JOIN "AspNetUsers" AS a0 ON a."StudentId" = a0."Id"
INNER JOIN "AspNetUsers" AS a1 ON a."ProfessorId" = a1."Id"
WHERE a."ProfessorId" = @__professorId_Value_0
ORDER BY a."StartAt"
[21:49:14 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.Appointment, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.AppointmentDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:49:14 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api) in 120.4061ms
[21:49:14 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api)'
[21:49:14 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/agenda/appointments responded 200 in 136.9483 ms
[21:49:14 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 200 null application/json; charset=utf-8 151.275ms
[21:49:14 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "AspNetUsers" AS a
[21:49:14 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:49:14 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:49:14 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:49:14 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:49:14 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (0ms) [Parameters=[@__dayStart_0='?' (DbType = DateTime), @__dayEnd_1='?' (DbType = DateTime), @__professorId_Value_2='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."CreatedAt", a."EndAt", a."Notes", a."PatientName", a."ProfessorId", a."Reason", a."StartAt", a."Status", a."StudentId", a."UpdatedAt"
FROM "Appointments" AS a
WHERE a."StartAt" >= @__dayStart_0 AND a."StartAt" < @__dayEnd_1 AND a."ProfessorId" = @__professorId_Value_2
[21:49:14 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:49:14 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'MEDICSYS.Api.Data.AppDbContext'.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[21:49:14 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:49:14 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AgendaController.GetAvailability (MEDICSYS.Api) in 156.4921ms
[21:49:14 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MEDICSYS.Api.Controllers.UserSummaryDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:49:14 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAvailability (MEDICSYS.Api)'
[21:49:14 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.UsersController.GetOdontologos (MEDICSYS.Api) in 165.1629ms
[21:49:14 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.UsersController.GetOdontologos (MEDICSYS.Api)'
[21:49:14 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/users/odontologos responded 200 in 184.5627 ms
[21:49:14 ERR] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/agenda/availability responded 500 in 175.4424 ms
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MEDICSYS.Api.Controllers.AgendaController.GetAvailability(DateTime date, Nullable`1 professorId, Nullable`1 studentId) in d:\Programación\MEDICSYS\MEDICSYS.Api\Controllers\AgendaController.cs:line 135
   at lambda_method382(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
[21:49:14 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/users/odontologos - 200 null application/json; charset=utf-8 189.7675ms
[21:49:14 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0)
[21:49:14 ERR] Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware: An unhandled exception has occurred while executing the request.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MEDICSYS.Api.Controllers.AgendaController.GetAvailability(DateTime date, Nullable`1 professorId, Nullable`1 studentId) in d:\Programación\MEDICSYS\MEDICSYS.Api\Controllers\AgendaController.cs:line 135
   at lambda_method382(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[21:49:14 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[@__email_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."Email" = @__email_0 OR a."UserName" = @__email_0
LIMIT 1
[21:49:14 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/agenda/availability?date=2026-02-05&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 500 null text/plain; charset=utf-8 221.0014ms
[21:49:14 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT c."Id", c."CreatedAt", c."Data", c."PatientId", c."ReviewNotes", c."ReviewedAt", c."ReviewedById", c."Status", c."StudentId", c."SubmittedAt", c."UpdatedAt", a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "ClinicalHistories" AS c
INNER JOIN "AspNetUsers" AS a ON c."StudentId" = a."Id"
ORDER BY c."UpdatedAt" DESC
[21:49:14 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.ClinicalHistory, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.ClinicalHistoryDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:49:14 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetAll (MEDICSYS.Api) in 214.3217ms
[21:49:14 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetAll (MEDICSYS.Api)'
[21:49:14 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/clinical-histories responded 200 in 226.0143 ms
[21:49:14 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/clinical-histories - 200 null application/json; charset=utf-8 231.2653ms
[21:49:14 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT p."Id", p."Address", p."Allergies", p."BloodType", p."CreatedAt", p."DateOfBirth", p."Diseases", p."Email", p."EmergencyContact", p."EmergencyPhone", p."FirstName", p."Gender", p."IdNumber", p."LastName", p."Medications", p."Notes", p."OdontologoId", p."Phone", p."UpdatedAt"
FROM "Patients" AS p
WHERE p."OdontologoId" = @__userId_0
ORDER BY p."LastName", p."FirstName"
[21:49:14 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MEDICSYS.Api.Models.Patient, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:49:14 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.PatientsController.GetAll (MEDICSYS.Api) in 273.4789ms
[21:49:14 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.PatientsController.GetAll (MEDICSYS.Api)'
[21:49:14 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/patients responded 200 in 284.4385 ms
[21:49:14 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/patients - 200 null application/json; charset=utf-8 289.9558ms
[21:49:18 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/appointments - null null
[21:49:18 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:18 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/agenda/appointments responded 204 in 0.8945 ms
[21:49:18 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/appointments - 204 null null 2.8278ms
[21:49:18 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 POST http://localhost:5154/api/agenda/appointments - application/json 274
[21:49:18 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:49:18 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AgendaController.CreateAppointment (MEDICSYS.Api)'
[21:49:18 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "CreateAppointment", controller = "Agenda"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MEDICSYS.Api.Contracts.AppointmentDto]] CreateAppointment(MEDICSYS.Api.Contracts.AppointmentRequest) on controller MEDICSYS.Api.Controllers.AgendaController (MEDICSYS.Api).
[21:49:18 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
[21:49:18 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AgendaController.CreateAppointment (MEDICSYS.Api) in 1.5826ms
[21:49:18 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AgendaController.CreateAppointment (MEDICSYS.Api)'
[21:49:18 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP POST /api/agenda/appointments responded 400 in 7.1639 ms
[21:49:18 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 POST http://localhost:5154/api/agenda/appointments - 400 null application/problem+json; charset=utf-8 9.1177ms
[21:49:34 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT r."Id", r."AppointmentId", r."Channel", r."CreatedAt", r."Message", r."ScheduledAt", r."SentAt", r."Status", r."Target"
FROM "Reminders" AS r
WHERE r."Status" = 'Pending' AND r."ScheduledAt" <= @__now_0
[21:50:34 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT r."Id", r."AppointmentId", r."Channel", r."CreatedAt", r."Message", r."ScheduledAt", r."SentAt", r."Status", r."Target"
FROM "Reminders" AS r
WHERE r."Status" = 'Pending' AND r."ScheduledAt" <= @__now_0
[21:51:35 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT r."Id", r."AppointmentId", r."Channel", r."CreatedAt", r."Message", r."ScheduledAt", r."SentAt", r."Status", r."Target"
FROM "Reminders" AS r
WHERE r."Status" = 'Pending' AND r."ScheduledAt" <= @__now_0
[21:52:35 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT r."Id", r."AppointmentId", r."Channel", r."CreatedAt", r."Message", r."ScheduledAt", r."SentAt", r."Status", r."Target"
FROM "Reminders" AS r
WHERE r."Status" = 'Pending' AND r."ScheduledAt" <= @__now_0
[21:53:35 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT r."Id", r."AppointmentId", r."Channel", r."CreatedAt", r."Message", r."ScheduledAt", r."SentAt", r."Status", r."Target"
FROM "Reminders" AS r
WHERE r."Status" = 'Pending' AND r."ScheduledAt" <= @__now_0
[21:53:51 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/availability?date=2026-02-03&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:53:51 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/users/odontologos - null null
[21:53:51 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:53:51 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:53:51 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/agenda/availability responded 204 in 1.5697 ms
[21:53:51 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/users/odontologos responded 204 in 1.4401 ms
[21:53:51 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/reminders?status=Due - null null
[21:53:51 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/availability?date=2026-02-03&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 204 null null 4.2717ms
[21:53:51 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:53:51 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/users/odontologos - 204 null null 4.5612ms
[21:53:51 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:53:51 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:53:51 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/users/odontologos - null null
[21:53:51 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/agenda/availability?date=2026-02-03&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:53:51 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/reminders responded 204 in 3.7371 ms
[21:53:51 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/agenda/appointments responded 204 in 2.1402 ms
[21:53:51 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:53:51 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:53:51 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/reminders?status=Due - 204 null null 8.371ms
[21:53:51 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 204 null null 8.8766ms
[21:53:51 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.UsersController.GetOdontologos (MEDICSYS.Api)'
[21:53:51 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAvailability (MEDICSYS.Api)'
[21:53:51 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:53:51 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/reminders?status=Due - null null
[21:53:51 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetOdontologos", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Controllers.UserSummaryDto]]] GetOdontologos() on controller MEDICSYS.Api.Controllers.UsersController (MEDICSYS.Api).
[21:53:51 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAvailability", controller = "Agenda"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MEDICSYS.Api.Contracts.AvailabilityResponse]] GetAvailability(System.DateTime, System.Nullable`1[System.Guid], System.Nullable`1[System.Guid]) on controller MEDICSYS.Api.Controllers.AgendaController (MEDICSYS.Api).
[21:53:51 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:53:51 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:53:51 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api)'
[21:53:51 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.RemindersController.GetReminders (MEDICSYS.Api)'
[21:53:51 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAppointments", controller = "Agenda"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.AppointmentDto]]] GetAppointments(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid]) on controller MEDICSYS.Api.Controllers.AgendaController (MEDICSYS.Api).
[21:53:51 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetReminders", controller = "Reminders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Controllers.ReminderDto]]] GetReminders(System.String) on controller MEDICSYS.Api.Controllers.RemindersController (MEDICSYS.Api).
[21:53:51 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "AspNetUsers" AS a
[21:53:51 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:53:51 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (0ms) [Parameters=[@__dayStart_0='?' (DbType = DateTime), @__dayEnd_1='?' (DbType = DateTime), @__professorId_Value_2='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."CreatedAt", a."EndAt", a."Notes", a."PatientName", a."ProfessorId", a."Reason", a."StartAt", a."Status", a."StudentId", a."UpdatedAt"
FROM "Appointments" AS a
WHERE a."StartAt" >= @__dayStart_0 AND a."StartAt" < @__dayEnd_1 AND a."ProfessorId" = @__professorId_Value_2
[21:53:51 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:53:51 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'MEDICSYS.Api.Data.AppDbContext'.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[21:53:51 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:53:51 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (4ms) [Parameters=[@__professorId_Value_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."CreatedAt", a."EndAt", a."Notes", a."PatientName", a."ProfessorId", a."Reason", a."StartAt", a."Status", a."StudentId", a."UpdatedAt", a0."Id", a0."AccessFailedCount", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."FullName", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UniversityId", a0."UserName", a1."Id", a1."AccessFailedCount", a1."ConcurrencyStamp", a1."Email", a1."EmailConfirmed", a1."FullName", a1."LockoutEnabled", a1."LockoutEnd", a1."NormalizedEmail", a1."NormalizedUserName", a1."PasswordHash", a1."PhoneNumber", a1."PhoneNumberConfirmed", a1."SecurityStamp", a1."TwoFactorEnabled", a1."UniversityId", a1."UserName"
FROM "Appointments" AS a
INNER JOIN "AspNetUsers" AS a0 ON a."StudentId" = a0."Id"
INNER JOIN "AspNetUsers" AS a1 ON a."ProfessorId" = a1."Id"
WHERE a."ProfessorId" = @__professorId_Value_0
ORDER BY a."StartAt"
[21:53:51 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AgendaController.GetAvailability (MEDICSYS.Api) in 175.0117ms
[21:53:51 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (3ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT r."Id", r."AppointmentId", r."Channel", r."CreatedAt", r."Message", r."ScheduledAt", r."SentAt", r."Status", r."Target", a."Id", a."CreatedAt", a."EndAt", a."Notes", a."PatientName", a."ProfessorId", a."Reason", a."StartAt", a."Status", a."StudentId", a."UpdatedAt"
FROM "Reminders" AS r
INNER JOIN "Appointments" AS a ON r."AppointmentId" = a."Id"
WHERE r."Status" = @__status_0
ORDER BY r."ScheduledAt"
[21:53:51 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:53:51 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.Appointment, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.AppointmentDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:53:51 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAvailability (MEDICSYS.Api)'
[21:53:51 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.Reminder, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Controllers.ReminderDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:53:51 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:53:51 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api) in 183.1198ms
[21:53:51 ERR] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/agenda/availability responded 500 in 199.1743 ms
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MEDICSYS.Api.Controllers.AgendaController.GetAvailability(DateTime date, Nullable`1 professorId, Nullable`1 studentId) in d:\Programación\MEDICSYS\MEDICSYS.Api\Controllers\AgendaController.cs:line 135
   at lambda_method382(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
[21:53:51 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.RemindersController.GetReminders (MEDICSYS.Api) in 183.8511ms
[21:53:51 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api)'
[21:53:51 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:53:51 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.RemindersController.GetReminders (MEDICSYS.Api)'
[21:53:51 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/agenda/appointments responded 200 in 213.1608 ms
[21:53:51 ERR] Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware: An unhandled exception has occurred while executing the request.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MEDICSYS.Api.Controllers.AgendaController.GetAvailability(DateTime date, Nullable`1 professorId, Nullable`1 studentId) in d:\Programación\MEDICSYS\MEDICSYS.Api\Controllers\AgendaController.cs:line 135
   at lambda_method382(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[21:53:51 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MEDICSYS.Api.Controllers.UserSummaryDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:53:51 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/reminders responded 200 in 217.6775 ms
[21:53:51 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 200 null application/json; charset=utf-8 221.8319ms
[21:53:51 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/agenda/availability?date=2026-02-03&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 500 null text/plain; charset=utf-8 244.4171ms
[21:53:51 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.UsersController.GetOdontologos (MEDICSYS.Api) in 232.5901ms
[21:53:51 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/reminders?status=Due - 200 null application/json; charset=utf-8 238.2068ms
[21:53:51 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.UsersController.GetOdontologos (MEDICSYS.Api)'
[21:53:51 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/users/odontologos responded 200 in 247.1337 ms
[21:53:51 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/users/odontologos - 200 null application/json; charset=utf-8 250.6037ms
[21:53:54 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/availability?date=2026-02-04&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:53:54 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:53:54 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:53:54 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:53:54 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/agenda/availability responded 204 in 1.4757 ms
[21:53:54 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api)'
[21:53:54 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/availability?date=2026-02-04&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 204 null null 4.0723ms
[21:53:54 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAppointments", controller = "Agenda"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.AppointmentDto]]] GetAppointments(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid]) on controller MEDICSYS.Api.Controllers.AgendaController (MEDICSYS.Api).
[21:53:54 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/agenda/availability?date=2026-02-04&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:53:54 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:53:54 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAvailability (MEDICSYS.Api)'
[21:53:54 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAvailability", controller = "Agenda"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MEDICSYS.Api.Contracts.AvailabilityResponse]] GetAvailability(System.DateTime, System.Nullable`1[System.Guid], System.Nullable`1[System.Guid]) on controller MEDICSYS.Api.Controllers.AgendaController (MEDICSYS.Api).
[21:53:54 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (4ms) [Parameters=[@__professorId_Value_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."CreatedAt", a."EndAt", a."Notes", a."PatientName", a."ProfessorId", a."Reason", a."StartAt", a."Status", a."StudentId", a."UpdatedAt", a0."Id", a0."AccessFailedCount", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."FullName", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UniversityId", a0."UserName", a1."Id", a1."AccessFailedCount", a1."ConcurrencyStamp", a1."Email", a1."EmailConfirmed", a1."FullName", a1."LockoutEnabled", a1."LockoutEnd", a1."NormalizedEmail", a1."NormalizedUserName", a1."PasswordHash", a1."PhoneNumber", a1."PhoneNumberConfirmed", a1."SecurityStamp", a1."TwoFactorEnabled", a1."UniversityId", a1."UserName"
FROM "Appointments" AS a
INNER JOIN "AspNetUsers" AS a0 ON a."StudentId" = a0."Id"
INNER JOIN "AspNetUsers" AS a1 ON a."ProfessorId" = a1."Id"
WHERE a."ProfessorId" = @__professorId_Value_0
ORDER BY a."StartAt"
[21:53:54 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.Appointment, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.AppointmentDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:53:54 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api) in 106.1465ms
[21:53:54 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api)'
[21:53:54 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/agenda/appointments responded 200 in 113.8840 ms
[21:53:54 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 200 null application/json; charset=utf-8 116.0218ms
[21:53:54 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (0ms) [Parameters=[@__dayStart_0='?' (DbType = DateTime), @__dayEnd_1='?' (DbType = DateTime), @__professorId_Value_2='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."CreatedAt", a."EndAt", a."Notes", a."PatientName", a."ProfessorId", a."Reason", a."StartAt", a."Status", a."StudentId", a."UpdatedAt"
FROM "Appointments" AS a
WHERE a."StartAt" >= @__dayStart_0 AND a."StartAt" < @__dayEnd_1 AND a."ProfessorId" = @__professorId_Value_2
[21:53:54 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'MEDICSYS.Api.Data.AppDbContext'.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[21:53:54 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:53:54 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/patients - null null
[21:53:54 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/clinical-histories - null null
[21:53:54 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/users/odontologos - null null
[21:53:55 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:53:55 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AgendaController.GetAvailability (MEDICSYS.Api) in 1279.8291ms
[21:53:55 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:53:55 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:53:55 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:53:55 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api)'
[21:53:55 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAvailability (MEDICSYS.Api)'
[21:53:55 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/patients responded 204 in 4.3476 ms
[21:53:55 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/clinical-histories responded 204 in 4.2784 ms
[21:53:55 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.UsersController.GetOdontologos (MEDICSYS.Api)'
[21:53:55 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAppointments", controller = "Agenda"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.AppointmentDto]]] GetAppointments(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid]) on controller MEDICSYS.Api.Controllers.AgendaController (MEDICSYS.Api).
[21:53:55 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/patients - 204 null null 1108.7481ms
[21:53:55 ERR] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/agenda/availability responded 500 in 1292.6518 ms
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MEDICSYS.Api.Controllers.AgendaController.GetAvailability(DateTime date, Nullable`1 professorId, Nullable`1 studentId) in d:\Programación\MEDICSYS\MEDICSYS.Api\Controllers\AgendaController.cs:line 135
   at lambda_method382(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
[21:53:55 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/clinical-histories - 204 null null 1107.0503ms
[21:53:55 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetOdontologos", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Controllers.UserSummaryDto]]] GetOdontologos() on controller MEDICSYS.Api.Controllers.UsersController (MEDICSYS.Api).
[21:53:55 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/clinical-histories - null null
[21:53:55 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/patients - null null
[21:53:55 ERR] Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware: An unhandled exception has occurred while executing the request.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MEDICSYS.Api.Controllers.AgendaController.GetAvailability(DateTime date, Nullable`1 professorId, Nullable`1 studentId) in d:\Programación\MEDICSYS\MEDICSYS.Api\Controllers\AgendaController.cs:line 135
   at lambda_method382(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[21:53:55 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:53:55 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:53:55 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetAll (MEDICSYS.Api)'
[21:53:55 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.PatientsController.GetAll (MEDICSYS.Api)'
[21:53:55 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/agenda/availability?date=2026-02-04&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 500 null text/plain; charset=utf-8 1346.3448ms
[21:53:55 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAll", controller = "ClinicalHistories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Contracts.ClinicalHistoryDto]]] GetAll() on controller MEDICSYS.Api.Controllers.ClinicalHistoriesController (MEDICSYS.Api).
[21:53:55 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MEDICSYS.Api.Models.Patient]]] GetAll() on controller MEDICSYS.Api.Controllers.PatientsController (MEDICSYS.Api).
[21:53:55 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 GET http://localhost:5154/api/agenda/availability?date=2026-02-04&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - null null
[21:53:55 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:53:55 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAvailability (MEDICSYS.Api)'
[21:53:55 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "GetAvailability", controller = "Agenda"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MEDICSYS.Api.Contracts.AvailabilityResponse]] GetAvailability(System.DateTime, System.Nullable`1[System.Guid], System.Nullable`1[System.Guid]) on controller MEDICSYS.Api.Controllers.AgendaController (MEDICSYS.Api).
[21:53:55 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (4ms) [Parameters=[@__professorId_Value_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."CreatedAt", a."EndAt", a."Notes", a."PatientName", a."ProfessorId", a."Reason", a."StartAt", a."Status", a."StudentId", a."UpdatedAt", a0."Id", a0."AccessFailedCount", a0."ConcurrencyStamp", a0."Email", a0."EmailConfirmed", a0."FullName", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."PasswordHash", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."SecurityStamp", a0."TwoFactorEnabled", a0."UniversityId", a0."UserName", a1."Id", a1."AccessFailedCount", a1."ConcurrencyStamp", a1."Email", a1."EmailConfirmed", a1."FullName", a1."LockoutEnabled", a1."LockoutEnd", a1."NormalizedEmail", a1."NormalizedUserName", a1."PasswordHash", a1."PhoneNumber", a1."PhoneNumberConfirmed", a1."SecurityStamp", a1."TwoFactorEnabled", a1."UniversityId", a1."UserName"
FROM "Appointments" AS a
INNER JOIN "AspNetUsers" AS a0 ON a."StudentId" = a0."Id"
INNER JOIN "AspNetUsers" AS a1 ON a."ProfessorId" = a1."Id"
WHERE a."ProfessorId" = @__professorId_Value_0
ORDER BY a."StartAt"
[21:53:55 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.Appointment, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.AppointmentDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:53:55 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api) in 144.3998ms
[21:53:55 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAppointments (MEDICSYS.Api)'
[21:53:55 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/agenda/appointments responded 200 in 158.4846 ms
[21:53:55 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/agenda/appointments?professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 200 null application/json; charset=utf-8 1269.4917ms
[21:53:55 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "AspNetUsers" AS a
[21:53:55 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:53:55 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:53:55 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:53:55 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:53:55 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:53:55 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0)
[21:53:55 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
[21:53:55 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (1ms) [Parameters=[@__email_0='?'], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."Email" = @__email_0 OR a."UserName" = @__email_0
LIMIT 1
[21:53:55 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MEDICSYS.Api.Controllers.UserSummaryDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:53:55 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT p."Id", p."Address", p."Allergies", p."BloodType", p."CreatedAt", p."DateOfBirth", p."Diseases", p."Email", p."EmergencyContact", p."EmergencyPhone", p."FirstName", p."Gender", p."IdNumber", p."LastName", p."Medications", p."Notes", p."OdontologoId", p."Phone", p."UpdatedAt"
FROM "Patients" AS p
WHERE p."OdontologoId" = @__userId_0
ORDER BY p."LastName", p."FirstName"
[21:53:55 INF] Microsoft.EntityFrameworkCore.Database.Command: Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT c."Id", c."CreatedAt", c."Data", c."PatientId", c."ReviewNotes", c."ReviewedAt", c."ReviewedById", c."Status", c."StudentId", c."SubmittedAt", c."UpdatedAt", a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UniversityId", a."UserName"
FROM "ClinicalHistories" AS c
INNER JOIN "AspNetUsers" AS a ON c."StudentId" = a."Id"
ORDER BY c."UpdatedAt" DESC
[21:53:55 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.UsersController.GetOdontologos (MEDICSYS.Api) in 163.1116ms
[21:53:55 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[MEDICSYS.Api.Models.ClinicalHistory, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MEDICSYS.Api.Contracts.ClinicalHistoryDto, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:53:55 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MEDICSYS.Api.Models.Patient, MEDICSYS.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[21:53:55 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.UsersController.GetOdontologos (MEDICSYS.Api)'
[21:53:55 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetAll (MEDICSYS.Api) in 140.7541ms
[21:53:55 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.PatientsController.GetAll (MEDICSYS.Api) in 140.1523ms
[21:53:55 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/users/odontologos responded 200 in 203.7012 ms
[21:53:55 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.ClinicalHistoriesController.GetAll (MEDICSYS.Api)'
[21:53:55 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.PatientsController.GetAll (MEDICSYS.Api)'
[21:53:55 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/users/odontologos - 200 null application/json; charset=utf-8 1307.458ms
[21:53:55 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/clinical-histories responded 200 in 177.3870 ms
[21:53:55 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/patients responded 200 in 177.3384 ms
[21:53:55 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/clinical-histories - 200 null application/json; charset=utf-8 200.6079ms
[21:53:55 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/patients - 200 null application/json; charset=utf-8 182.2369ms
[21:53:55 ERR] Microsoft.EntityFrameworkCore.Database.Command: Failed executing DbCommand (0ms) [Parameters=[@__dayStart_0='?' (DbType = DateTime), @__dayEnd_1='?' (DbType = DateTime), @__professorId_Value_2='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT a."Id", a."CreatedAt", a."EndAt", a."Notes", a."PatientName", a."ProfessorId", a."Reason", a."StartAt", a."Status", a."StudentId", a."UpdatedAt"
FROM "Appointments" AS a
WHERE a."StartAt" >= @__dayStart_0 AND a."StartAt" < @__dayEnd_1 AND a."ProfessorId" = @__professorId_Value_2
[21:53:55 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'MEDICSYS.Api.Data.AppDbContext'.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[21:53:55 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AgendaController.GetAvailability (MEDICSYS.Api) in 161.862ms
[21:53:55 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AgendaController.GetAvailability (MEDICSYS.Api)'
[21:53:55 ERR] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP GET /api/agenda/availability responded 500 in 172.2638 ms
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MEDICSYS.Api.Controllers.AgendaController.GetAvailability(DateTime date, Nullable`1 professorId, Nullable`1 studentId) in d:\Programación\MEDICSYS\MEDICSYS.Api\Controllers\AgendaController.cs:line 135
   at lambda_method382(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
[21:53:55 ERR] Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware: An unhandled exception has occurred while executing the request.
System.ArgumentException: Cannot write DateTime with Kind=Unspecified to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MEDICSYS.Api.Controllers.AgendaController.GetAvailability(DateTime date, Nullable`1 professorId, Nullable`1 studentId) in d:\Programación\MEDICSYS\MEDICSYS.Api\Controllers\AgendaController.cs:line 135
   at lambda_method382(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[21:53:55 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 GET http://localhost:5154/api/agenda/availability?date=2026-02-04&professorId=855409da-22ad-4a15-9c3e-7970c0cb9c4e - 500 null text/plain; charset=utf-8 209.7248ms
[21:53:57 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/appointments - null null
[21:53:57 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:53:57 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP OPTIONS /api/agenda/appointments responded 204 in 0.9645 ms
[21:53:57 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 OPTIONS http://localhost:5154/api/agenda/appointments - 204 null null 3.6085ms
[21:53:57 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request starting HTTP/1.1 POST http://localhost:5154/api/agenda/appointments - application/json 273
[21:53:57 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService: CORS policy execution successful.
[21:53:57 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executing endpoint 'MEDICSYS.Api.Controllers.AgendaController.CreateAppointment (MEDICSYS.Api)'
[21:53:57 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Route matched with {action = "CreateAppointment", controller = "Agenda"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MEDICSYS.Api.Contracts.AppointmentDto]] CreateAppointment(MEDICSYS.Api.Contracts.AppointmentRequest) on controller MEDICSYS.Api.Controllers.AgendaController (MEDICSYS.Api).
[21:53:57 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor: Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
[21:53:57 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker: Executed action MEDICSYS.Api.Controllers.AgendaController.CreateAppointment (MEDICSYS.Api) in 1.5566ms
[21:53:57 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware: Executed endpoint 'MEDICSYS.Api.Controllers.AgendaController.CreateAppointment (MEDICSYS.Api)'
[21:53:57 INF] Serilog.AspNetCore.RequestLoggingMiddleware: HTTP POST /api/agenda/appointments responded 400 in 7.4169 ms
[21:53:57 INF] Microsoft.AspNetCore.Hosting.Diagnostics: Request finished HTTP/1.1 POST http://localhost:5154/api/agenda/appointments - 400 null application/problem+json; charset=utf-8 9.1518ms
